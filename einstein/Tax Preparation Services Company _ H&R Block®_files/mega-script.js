/*
 jQuery JSON plugin 2.4.0 | code.google.com/p/jquery-json */
if(typeof HRBData=="undefined")document.write('<script type="text/javascript" src="/includes/js/hrb-common-data.js" charset="utf-8">\x3c/script>');var g_partner_id=0;var g_partner_cid="";var g_b_ws_partner_id_different=false;var g_dr_url_info="";var g_b_drInfoInCookie=false;
var HRB=function($){var _setCookie=function(key,value,ttl,path,domain,secure,lvl){var _temp=window.location.hostname;if(lvl=="root")var domain_lvl=_temp.substr(_temp.indexOf("."));else if(lvl=="sub")domain_lvl=window.location.hostname;cookie=[key+"="+escape(value),"path="+(!path||path==""?"/":path),"domain="+(!domain||domain==""?domain_lvl:domain)];var exp="";if(ttl){if(parseInt(ttl)=="NaN")exp="";else{now=new Date;now.setTime(now.getTime()+parseInt(ttl)*60*60*1E3);exp=now.toGMTString()}cookie.push(exp)}if(secure)cookie.push("secure");
return document.cookie=cookie.join("; ")};var _setSessionCookie=function(key,value,lvl){_setCookie(key,value,null,"/","","",lvl)};var _wscReg=[/,"sn":"\/loginRedirect.html\?TaxType/g,/"bpr":"/g,/"sn":null,"lm":"\/tax-software/g,/&FV=T&HT=F&/g,/\/online-tax-filing/g,/\.html/g,/"pl":"O","on"/g,/"pl":"S","on"/g,/"rv":null,"rt":null,"ppr":"/g,/"sk":{"win":/g,/{"pid":"/g,/","rv":"0","rt":"0"}/g,/premium/g,/deluxe/g,/TaxYear=2019","lm":"/g,/","ppr":"/g];var _urlLookup={"TCX":"https://login.taxes.hrblock.com/",
"MYACCT":"https://myaccount.hrblock.com/","CMRY":"https://store.hrblock.com/","HRB":"","GUA":"https://loginrouter.hrblock.com/","SEARCH":"search3"};var def_pricing='{"status":{"tco":0,"tcs":0,"ver":1},"partner":{"cid":"otpPartnerID=0","name":"-","typ":"normal","welcome":"na","otpPartnerID":"0","tunnel":0,"partnerID":"0","active":1},'+'"prodList":['+'{"pid":"64",                "bpr":"0.00",  "ppr":"0.00",  "sk":"NA",         "sn":"-","lm":"/tax-offices/","pl":"R","on":"-","rv":"0","rt":"0"},'+'{"pid":"31",                "bpr":"0.00",  "ppr":"0.00",  "sk":"NA",         "sn":"-","lm":"/online-tax-filing/","pl":"O","on":"parent","rv":"0","rt":"0"},'+
'{"pid":"201",               "bpr":"0.00",  "ppr":"-1",    "sk":"TCFFED",     "sn":"TaxType=TCF&TaxYear=2019","lm":"/online-tax-filing/free-online-tax-filing/","pl":"O","on":"free_edition_fed","rv":"","rt":""},'+'{"pid":"202",               "bpr":"0.00",  "ppr":"-1",    "sk":"TCFSTA",     "sn":"-","lm":"202.html","pl":"O","on":"free_edition-state","rv":"0","rt":"0"},'+'{"pid":"45",                "bpr":"49.99", "ppr":"49.99", "sk":"TCFReview",  "sn":"-","lm":"/online-tax-filing/","pl":"O","on":"taxpro_review_for_free","rv":"","rt":""},'+
'{"pid":"204",               "bpr":"49.99", "ppr":"49.99", "sk":"TCDFED",     "sn":"TaxType=TCD&TaxYear=2019","lm":"/online-tax-filing/deluxe-online-tax-filing/","pl":"O","on":"deluxe_fed","rv":"","rt":""},'+'{"pid":"205",               "bpr":"44.99", "ppr":"44.99", "sk":"TCDSTA",     "sn":"-","lm":"205.html","pl":"O","on":"deluxe_state","rv":"0","rt":"0"},'+'{"pid":"46",                "bpr":"59.99", "ppr":"59.99", "sk":"TCDReview",  "sn":"-","lm":"/online-tax-filing/","pl":"O","on":"taxpro_review_for_deluxe","rv":"","rt":""},'+
'{"pid":"32",                "bpr":"69.99", "ppr":"69.99", "sk":"PAID1040FED","sn":"TaxType=OPP&TaxYear=2019","lm":"/online-tax-filing/premium-online-tax-filing/","pl":"O","on":"premium","rv":"","rt":""},'+'{"pid":"192",               "bpr":"44.99", "ppr":"44.99", "sk":"PAID1040STA","sn":"-","lm":"192.html","pl":"O","on":"premium_state","rv":"0","rt":"0"},'+'{"pid":"44",                "bpr":"89.99", "ppr":"89.99", "sk":"OPPReview",  "sn":"-","lm":"/online-tax-filing/","pl":"O","on":"taxpro_review_for_premium","rv":"","rt":""},'+
'{"pid":"47",                "bpr":"104.99","ppr":"104.99","sk":"SEPFed",     "sn":"TaxType=SEP&TaxYear=2019","lm":"/online-tax-filing/self-employed-online-tax-filing/","pl":"O","on":"selfemployed_fed_return","rv":"","rt":""},'+'{"pid":"48",                "bpr":"44.99", "ppr":"44.99", "sk":"SEPSta",     "sn":"-","lm":"","pl":"O","on":"selfemployed_state_return","rv":"","rt":""},'+'{"pid":"49",                "bpr":"89.99", "ppr":"89.99", "sk":"SEPReview",  "sn":"-","lm":"/online-tax-filing/self-employed-online-tax-filing/","pl":"O","on":"taxpro_review_for_selfemployed","rv":"","rt":""},'+
'{"pid":"50",                "bpr":"119.99","ppr":"119.99","sk":"TRVFed",     "sn":"TaxType=TRV&TaxYear=2019","lm":"/online-tax-filing/tax-pro-review/","pl":"O","on":"taxproreview_fed_return","rv":"","rt":""},'+'{"pid":"51",                "bpr":"39.99", "ppr":"39.99", "sk":"TRVSta",     "sn":"-","lm":"","pl":"O","on":"taxproreview_state_return","rv":"","rt":""},'+'{"pid":"52",                "bpr":"49.99", "ppr":"49.99", "sk":"OABFED",     "sn":"TaxType=OAB&TaxYear=2019","lm":"","pl":"O","on":"assist basic fed","rv":"","rt":""},'+
'{"pid":"53",                "bpr":"39.99", "ppr":"39.99", "sk":"OABSTA",     "sn":"-","lm":"","pl":"O","on":"assist basic state","rv":"","rt":""},'+'{"pid":"54",                "bpr":"99.99", "ppr":"99.99", "sk":"OADFED",     "sn":"TaxType=OAD&TaxYear=2019","lm":"","pl":"O","on":"assist deluxe fed","rv":"","rt":""},'+'{"pid":"55",                "bpr":"49.99", "ppr":"49.99", "sk":"OADSTA",     "sn":"-","lm":"","pl":"O","on":"assist deluxe state","rv":"","rt":""},'+'{"pid":"56",                "bpr":"139.99","ppr":"139.99","sk":"OAPFED",     "sn":"TaxType=OAP&TaxYear=2019","lm":"","pl":"O","on":"assist premium fed","rv":"","rt":""},'+
'{"pid":"57",                "bpr":"49.99", "ppr":"49.99", "sk":"OAPSTA",     "sn":"-","lm":"","pl":"O","on":"assist premium state","rv":"","rt":""},'+'{"pid":"58",                "bpr":"169.99","ppr":"169.99","sk":"OASFED",     "sn":"TaxType=OAS&TaxYear=2019","lm":"","pl":"O","on":"assist self emp fed","rv":"","rt":""},'+'{"pid":"59",                "bpr":"49.99", "ppr":"49.99", "sk":"OASSTA",     "sn":"-","lm":"","pl":"O","on":"assist self emp state","rv":"","rt":""},'+'{"pid":"85",                "bpr":"0.00",  "ppr":"0.00",  "sk":"FREE1040FED","sn":"TaxType=OTP&TaxYear=2019","lm":"product.jsp?productId=85","pl":"O","on":"ffa","rv":"","rt":""},'+
'{"pid":"189",               "bpr":"0.00",  "ppr":"0.00",  "sk":"FREE1040STA","sn":"-","lm":"product.jsp?productId=189","pl":"O","on":"ffa_st","rv":"0","rt":"0"},'+'{"pid":"199",               "bpr":"29.95", "ppr":"29.95", "sk":{"win":"WDBF","mac":"MDBF"},"sn":"-","lm":"/tax-software/basic-tax-software/","pl":"S","on":"tcs_basic_fed","rv":"","rt":""},'+'{"pid":"206",               "bpr":"44.95", "ppr":"44.95", "sk":{"win":"WDDF","mac":"MDDF"},"sn":"-","lm":"/tax-software/deluxe-without-state/","pl":"S","on":"tcs_deluxe_fed","rv":"0","rt":"0"},'+
'{"pid":"207",               "bpr":"54.95", "ppr":"54.95", "sk":{"win":"WDDA","mac":"MDDA"},"sn":"-","lm":"/tax-software/deluxe-tax-software/","pl":"S","on":"tcs_deluxe_state","rv":"","rt":""},'+'{"pid":"36",                "bpr":"74.95", "ppr":"74.95", "sk":{"win":"WDPA","mac":"MDPA"},"sn":"-","lm":"/tax-software/premium-tax-software/","pl":"S","on":"tcs_premium_fed","rv":"","rt":""},'+'{"pid":"38",                "bpr":"89.95", "ppr":"89.95", "sk":{"win":"WDPH","mac":"MDPH"},"sn":"-","lm":"/tax-software/premium-small-business-tax-software/","pl":"S","on":"tcs_home_and_business","rv":"","rt":""},'+
'{"pid":"39",                "bpr":"39.95", "ppr":"39.95", "sk":{"win":"","mac":""},        "sn":"-","lm":"/tax-software/state-editions.html","pl":"S","on":"tcs_state","rv":"0","rt":"0"}]}';var _priceObj=null;var _pageObj=null;return{spclEmpSolPartnerId:"9423",bIsSpclEmpSolPartner:false,bForcePartnerChange:false,bRemoveAdobeSessionObject:false,test:false,page:{_srchPartner:{"localhost123":{"p":2007,"t":"q"},"google":{"p":2054,"t":"q"},"yahoo":{"p":2055,"t":"p"},"bing":{"p":2056,"t":"q"},"aol":{"p":2057,
"t":"query|userQuery"},"netscape":{"p":2058,"t":"query|userQuery"},"ask":{"p":2059,"t":"q|ask"}},getPageProperties:function(){if(_pageObj==null){_pageObj=new Page;var ref=document.referrer;_pageObj.setPath(document.location.pathname);var cmpn_id=HRB.tools.getQueryUrl("CampaignID");var qsmap={};var qs=window.location.search;qs.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function($0,$1,$2,$3){qsmap[$1]=$3});_pageObj.setQueryMap(qsmap);_pageObj.setReferrer(ref);_pageObj.setCampaignId(cmpn_id);var referrer_query=
ref!=null&&ref.indexOf("?")!=-1?ref.substr(ref.indexOf("?")):"";var term="";var termarr;for(partner in HRB.page._srchPartner){HRB.tools.log("Referrer Check: Is it "+partner);var ptrobj=ref.indexOf(partner)>=0?HRB.page._srchPartner[partner]:null;if(ptrobj!=null){_pageObj.setRefPartner(ptrobj.p);termarr=ptrobj.t.split("|");for(j=0;j<termarr.length;j++){term=referrer_query==""?"":HRB.tools.getQueryParam(termarr[j],referrer_query);if(j==0&&term==null)if(_pageObj.getRefPartner()==2059)term=referrer_query==
""?"":HRB.tools.getQueryParam(termarr[j+1],referrer_query);else term=referrer_query=="userQuery-nfd"?"":HRB.tools.getQueryParam(termarr[j+1],referrer_query);break}_pageObj.setSearchTerm(term);HRB.tools.log("Referrer Check: Referrer was '"+partner+"' and search term was '"+term+"'");break}}return _pageObj}else return _pageObj}},settings:{officeMaps:{"enableSignedUrlCall":false}},dataLayer:{},integration:{configLookup:{"TAXYEAR":"2019"},getURL:function(module){return _urlLookup[module]},getConfig:function(module){return HRB.integration.configLookup[module]},
delayedProductStartNow:function(opt){HRB.tools.log("DTM:delayedProductStartNow() waiting "+HRBData.config.dtmDelay+" milliseconds...");setTimeout(function(){HRB.integration.productStartNow(opt)},HRBData.config.dtmDelay)},delayedProductStartNowFinish:function(opt,targetURL){HRB.tools.log("DTM:delayedProductStartNowFinish() waiting "+HRBData.config.dtmDelay+" milliseconds...");setTimeout(function(){HRB.integration.productStartNowFinish(opt,targetURL)},HRBData.config.dtmDelay)},productStartNow:function(opt){var pid_val=
HRB.partner.fromCookie()!=null?HRB.partner.fromCookie():0;var cm_offid="";if(HRB.session.getValue("digitalriver")!=null)cm_offid="/"+HRB.tools.getQueryParam("CamryID",HRB.session.getValue("digitalriver"));if(document.location.href.indexOf("symantec.html")!=-1)cm_offid="/0BA7F90C";if(cm_offid=="/null")cm_offid="/";if(cm_offid=="/81091483")cm_offid="/51B366B5";if(cm_offid=="/7762FD76")cm_offid="/E08482DD";var onFfaPage=window.location.pathname.indexOf("/ffa")!=-1?true:false;if(onFfaPage){HRB.tools.log("FFA: on FFA page so cahnge product "+
opt.pid+" to 85 FFA FED if necessary.");opt.pid=85}var u="";var def_found="";var pInfo=HRB.products.getProducts().getProductInfo(opt.pid);var plInfo=HRB.products.getProducts().getProductsByPlatform("S");var cmURL;if(opt.type=="dn"){if(typeof opt.os=="undefined")opt.os="win";for(var k=0;k<plInfo.length;k++)if(opt.pid==plInfo[k].pid){def_found="Y";if(opt.pid==39)cmURL="state/"+opt.yr+"/"+opt.st+"/"+opt.os;else cmURL=opt.yr+"/"+pInfo.sk[opt.os]}if(def_found=="Y")u="checkout/"+cmURL;else if(def_found==
""&&opt.pid!=40)u="checkout/"+opt.yr+"/"+opt.pid;else if(def_found==""&&opt.pid==40)u="checkout/bstate/"+opt.yr+"/"+opt.st+"/"+opt.os;if(HRB.test)return u;if(HRBData.config.softwareCartMaintenance)window.top.location="/service_unavailable.html?action=softcartmaint";else window.top.location=this.getURL("CMRY")+u+cm_offid+"?pid="+pid_val}else{var bShowTprPrompt=false;HRB.tools.log("TPR: bShowTprPrompt:"+bShowTprPrompt);var bTprSentRequest=typeof opt.tprPopup!="undefined"&&opt.tprPopup.toUpperCase()==
"Y"?true:false;HRB.tools.log("TPR: bTprSentRequest:"+bTprSentRequest);if(bShowTprPrompt){HRB.tools.log("TPR: prompt enabled");if(bTprSentRequest){HRB.tools.log("TPR: Start Now came from the TPR prompt");if(typeof opt.attachTpr!="undefined"&&opt.attachTpr.toUpperCase()=="Y"){HRB.tools.log("TPR: opt.attachTpr is:"+opt.attachTpr+", so client DID attached TPR in the prompt");var tprSelections=HRB.session.getValue("tprSelections");var tprSelectionsObj=jQuery.parseJSON(tprSelections);tprSelectionsObj[opt.pid]=
"Y";HRB.session.storeValue("tprSelections",JSON.stringify(tprSelectionsObj))}else HRB.tools.log("TPR: opt.attachTpr is:"+opt.attachTpr+", so client DID NOT attached TPR in the prompt")}else{HRB.tools.log("TPR: Start Now came from regular Start Now button not from TPR prompt");if(HRB.ui.getTPRbyProduct(opt.pid).toUpperCase()=="Y")HRB.tools.log("TPR: Client already attached TPR so don't show prompt. Continue normal processing.");else{HRB.productForTprPrompt=opt.pid;try{HRB.tools.log("TPR: Show TPR Prompt");
showTprPopup();return}catch(e$0){HRB.tools.log("TPR: Error calling showTprPopup(). Continue normal processing.")}}}}else HRB.tools.log("TPR: Adobe T&T didn't enable TPR prompt on this page, continue normal processing.");u=pInfo.sn;var mInfo=HRB.session.getValue("main_cookie");if(mInfo!=null){if(mInfo.substring(0,1)!="&")mInfo="&"+mInfo;u=u+mInfo}if(HRB.test)return u;var tcxUrl=u.substr(u.indexOf("?")+1);var taxType=HRB.tools.getQueryParam("taxtype",tcxUrl);taxType=taxType.toLowerCase();HRBData.digital_data.page_title=
taxType=="py"?"opp":taxType;HRBData.digital_data.page_title+="_login";HRBData.digital_data.page_sub_section="online_taxes";HRB.analytics.callRule("vpage_global");HRB.tools.log("unsetCookie WSC");HRB.tools.unsetCookie("wsc","");var disallowedParms=["ctrack","srchterm","orpid","otppartnerid","productid","tpage","pgm","cid","ocsstat","offerid","coname","coid","showpanels","sr","oauth_consumer_key","oauth_nonce","oauth_signature_method","oauth_timestamp","oauth_version","oauth_signature","uid"];for(var x=
0;x<disallowedParms.length;x++)tcxUrl=HRB.tools.removeParameter(tcxUrl,disallowedParms[x]);tcxUrl+="&PS=Y";var srchterm=HRB.tools.getQueryParam("srchterm",HRB.tools.getCookie("main_cookie"));if(srchterm!=null)tcxUrl+="&siteID="+srchterm;var temp=tcxUrl.split("&&");tcxUrl=temp.join("&");var TCXDomain=HRB.integration.getURL("TCX");var lastChar=TCXDomain[TCXDomain.length-1];var slash=lastChar=="/"?"":"/";var strTargetURL=TCXDomain+slash+"hrblock/login/LoginRegistration.hrbx?"+tcxUrl;try{if(HRB.tools.checkEnv()==
"DEV"||HRB.tools.checkEnv()=="QA"){tcxUrl=tcxUrl.replace("=2018","=2019");strTargetURL=TCXDomain+slash+"hrblock/login/LoginRegistration.hrbx?"+tcxUrl}}catch(e$1){}if(HRB.ui.getTPRbyProduct(opt.pid).toUpperCase()=="Y"){HRB.tools.log("TPR: adding RS=Y to GUA url");strTargetURL+="&RS=Y"}strTargetURL+="&showStartwithoutAccount=true&origin=hrblock.product.sn";HRB.integration.delayedProductStartNowFinish(opt,strTargetURL)}},productStartNowFinish:function(opt,strTargetURL){HRB.tools.log("gua:"+strTargetURL.substr(0,
strTargetURL.indexOf("?")));HRB.tools.log("gua:"+strTargetURL.substr(strTargetURL.indexOf("?")));HRB.tools.log("FFA:"+strTargetURL.substr(0,strTargetURL.indexOf("?")));HRB.tools.log("FFA:"+strTargetURL.substr(strTargetURL.indexOf("?")));try{if(HRBData.config.guaMaintenance){window.top.location=HRBData.config.guaMaintPage;return}}catch(e$2){}if(opt.guapage=="true")if(strTargetURL.toLowerCase().indexOf("&rs=y")==-1)window.top.location="/lp/sign-in/index.html?tpr=false";else window.top.location="/lp/sign-in/index.html?tpr=true";
else if(opt.nw)window.open(strTargetURL);else{bReplacePartnerIdInPriceResponseWithES=false;if(g_partner_id=="9423"){var campaignIdToEvaluate=HRB.tools.getQueryParam("campaignid",HRB.tools.getCookie("main_cookie"));if(campaignIdToEvaluate!=null){HRB.tools.log("ES: startnow: campaignIdToEvaluate:"+campaignIdToEvaluate);var pidIndex=campaignIdToEvaluate.lastIndexOf("_");HRB.tools.log("ES: startnow: pidIndex:"+pidIndex);var seqNbrFromCampaignId=campaignIdToEvaluate.substr(pidIndex+1);HRB.tools.log("ES: startnow: partner id from campaignid parameter is:"+
seqNbrFromCampaignId);if(HRBData.config.estest.corestream&&seqNbrFromCampaignId=="7443"){otp_partner_id=9538;bReplacePartnerIdInPriceResponseWithES=true}else if(HRBData.config.estest.beneplace&&seqNbrFromCampaignId=="4359"){otp_partner_id=9539;bReplacePartnerIdInPriceResponseWithES=true}else if(HRBData.config.estest.perkspot&&seqNbrFromCampaignId=="4209"){otp_partner_id=9540;bReplacePartnerIdInPriceResponseWithES=true}if(HRB.tools.checkEnv()=="DEV")if(seqNbrFromCampaignId=="7801"){otp_partner_id=
9540;bReplacePartnerIdInPriceResponseWithES=true}HRB.tools.log("ES: 1:"+strTargetURL.substr(strTargetURL.indexOf("?")));if(bReplacePartnerIdInPriceResponseWithES){HRB.tools.log("ES: 2:"+strTargetURL.substr(strTargetURL.indexOf("?")));strTargetURL=strTargetURL.replace(/9423/g,otp_partner_id)}}}if(opt.pid==85)try{var theGuaUrlPid=HRB.tools.getQueryParam("partnerid",strTargetURL);if(!isFFA(theGuaUrlPid)){console.log("FFA: swap non-FFA id "+theGuaUrlPid+" with FFA id 180 in GUA url");strTargetURL=strTargetURL.replace(/PartnerId=\d+/ig,
"PartnerId=180");var inxStart=strTargetURL.toLowerCase().indexOf("&campaignid");if(inxStart!=-1){console.log("FFA: &campaignid is at "+inxStart);var cString="campaignId=pw_mcm_180_0001";inxStop=strTargetURL.indexOf("&",inxStart+1);console.log("FFA: first & after &campaignid is at "+inxStop);if(inxStop==-1)newURL=strTargetURL.substr(0,inxStart)+"&"+cString;else newURL=strTargetURL.substr(0,inxStart)+"&"+cString+strTargetURL.substr(inxStop);console.log("FFA: changed "+strTargetURL+" to "+newURL);strTargetURL=
newURL}}if(HRBData.config.newWindowForFFA)window.open(strTargetURL,"_blank");else window.top.location=strTargetURL}catch(e$3){console.error("FAA: issue opening FFA in new window. e:"+e$3);window.top.location=strTargetURL}else{try{var theGuaUrlPid=HRB.tools.getQueryParam("partnerid",strTargetURL);if(isFFA(theGuaUrlPid)){var wscPid=HRB.products.getProducts().getPartnerInfo().otpPartnerID;console.log("FFA: swap FFA id "+theGuaUrlPid+" with wsc pid "+wscPid+" in GUA url");if(wscPid!=null)strTargetURL=
strTargetURL.replace(/PartnerId=\d+/ig,"PartnerId="+wscPid);var inxStart=strTargetURL.toLowerCase().indexOf("&campaignid");if(inxStart!=-1){console.log("FFA: &campaignid is at "+inxStart);inxStop=strTargetURL.indexOf("&",inxStart+1);console.log("FFA: first & after &campaignid is at "+inxStop);if(inxStop==-1)newURL=strTargetURL.substr(0,inxStart);else newURL=strTargetURL.substr(0,inxStart)+strTargetURL.substr(inxStop);console.log("FFA: changed "+strTargetURL+" to "+newURL);strTargetURL=newURL}}}catch(e$4){console.error("FFA: failed trying to swap out FFA id "+
theGuaUrlPid+" in cookie with wsc pid "+wscPid+" in GUA url")}window.top.location=strTargetURL}}},productLearnMore:function(opt){var pInfo=HRB.products.getProducts().getProductInfo(opt.pid);var destURL=pInfo.lm;if(HRB.test)return destURL;if(opt.nw)window.open(this.getURL("HRB")+destURL);else window.top.location=this.getURL("HRB")+destURL},getGUAUrl:function(viewType){try{if(HRBData.config.guaMaintenance){window.top.location=HRBData.config.guaMaintPage;return}}catch(e$5){}var bMaint=false;if(bMaint)window.top.location=
"https://maintenance.hrblock.com/hrblockmaintenance/maintenance.aspx";else{var gua_url="loginrouter/login?viewType="+viewType+"&origin=hrblock.li";if(HRB.tools.checkEnv()=="DEV")gua_url="mytax/login?origin=hrblock.li";if(window.location.href.indexOf("/espanol")!=-1)gua_url+="&lang=es";if(HRB.test)return gua_url;window.top.location=this.getURL("GUA")+gua_url}},getGUAUrlCreateAccount:function(viewType){try{if(HRBData.config.guaMaintenance){window.top.location=HRBData.config.guaMaintPage;return}}catch(e$6){}var bMaint=
false;if(bMaint)window.top.location="https://maintenance.hrblock.com/hrblockmaintenance/maintenance.aspx";else{var gua_url="loginrouter/login?viewType="+viewType+"&origin=hrblock.li&createuser=true";if(HRB.tools.checkEnv()=="DEV")gua_url="mytax/login?origin=hrblock.li";else if(HRB.tools.checkEnv()=="QA")gua_url="loginrouter/login?viewType=4&origin=hrblock.li&createuser=true";if(window.location.href.indexOf("/espanol")!=-1)gua_url+="&lang=es";if(HRB.test)return gua_url;window.top.location=this.getURL("GUA")+
gua_url}},getMyAccUrl:function(){var myAccUrl="mytax/login?origin=hrblock.ec.sn";if(HRB.test)return myAccUrl;return this.getURL("MYACCT")+myAccUrl},getApptUrl:function(id){var apptUrl=id>0?HRB.locator.getAppointmentCalendarPath(null)+id:"/tax-offices/tax-pro-finder.html";if(HRB.test)return apptUrl;window.top.location=this.getURL("HRB")+apptUrl},submitEmail:function(opts){opts.event.preventDefault();emailval=opts.form.email.value;var emailRegex=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;messageDiv=
$(opts.form).hasClass("form-email")?$(".generic-message"):$(".tile-generic-message");HRB.aria.clearAlert();if(!emailval.match(emailRegex)){messageDiv.html('<font color="#e0e055"><span class="reader">Error. </span>The email address is not valid.</font>');if(messageDiv.selector==".tile-generic-message")messageDiv.html('<font color="#e0e055"><span class="reader">The email address <br/>is not valid</span>');opts.form.email.setAttribute("aria-invalid","true");opts.form.email.focus();return false}else{opts.form.email.setAttribute("aria-invalid",
"false");var postData="store_email="+emailval+"&tax_tips_subscribe=COUPON&tax_tips_store=STORE";var msgThanks="Thank you for your registration.";var msgAlready="Your e-mail address is already registered.";var msgError="An error occurred, please try later.";$.ajax({"type":"GET","url":"/taxtip/TaxtipEmailServlet","data":postData,"success":function(data){if(typeof data!="undefined"){var success_email=data.split("_")[1].split(":")[1];var success_store=data.split("_")[0].split(":")[1];if(success_email==
"true"&&success_store=="true")messageDiv.html("<b>"+msgThanks+"</b>");else if(success_store=="true")messageDiv.html("<b>"+msgThanks+"</b>");else if(success_store=="false"){messageDiv.html("<span class='reader'>Error.</span><font color='#ff0000'>"+msgAlready+"</font>");if(messageDiv.selector==".tile-generic-message")messageDiv.html("<span class='reader'>Error.</span><font color='#ff0000'>Your e-mail address is <br/>already registered.</font>")}else messageDiv.html('<span class="reader">Error.</span><font color="#ff0000">Please try later.</font>')}},
error:function(){messageDiv.html('<span class="reader">Error.</span><font color="#ff0000">Please try later.</font>')}})}}},aria:{clearAlert:function(){var oldAlert=$("#alert");if(oldAlert.length!=0)$("#alert").remove()},setAlert:function(msg){var newAlert=document.createElement("div");newAlert.setAttribute("aria-live","polite");newAlert.setAttribute("role","alert");newAlert.setAttribute("id","alert");newAlert.setAttribute("class","reader");var msg=document.createTextNode(msg);newAlert.appendChild(msg);
$("body").append(newAlert)}},tools:{checkEnv:function(){return"PROD"},toTitleCase:function(str,arraySkipTheseWords){var newStr=str.replace(/\w\S*/g,function(txt){if($.inArray(txt,arraySkipTheseWords)!=-1)return txt;else return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()});return newStr},IsValidImage:function(url,callback){$("<img>",{src:url,error:function(){callback(url,false)},load:function(){callback(url,true)}})},isArray:function(o){return Object.prototype.toString.call(o)==="[object Array]"},
isObject:function(o){return typeof o==="object"},logger:function(msg){if(this.getQueryUrl("debug")==1){var dbg_win=window.open("","debugwin","resizable=1,width=600,height=350,scrollbars=1");dbg_win.document.write("<body><div id='d3' style='font-family:Verdana;font-size:11px;'><p align=center></p>"+msg+"</body>")}},log:function(){if(window.console&&window.console.log)window.console.log(Array.prototype.slice.call(arguments));else{var winmsg="";for(var i=0;i<Array.prototype.slice.call(arguments).length;i++)winmsg+=
Array.prototype.slice.call(arguments)[i]+"<br><br>";this.logger(winmsg)}},_compress:function(_wsc){return _wsc},_decompress:function(_wsc){if(_wsc.indexOf("!b")!=-1)for(var j=_wscReg.length-1;j>=0;j--)_wsc=_wsc.replace(new RegExp("!"+String.fromCharCode(97+j),"g"),_wscReg[j].source.replace(/\\/g,""));return _wsc},getQueryParam:function(key,src){if(src!=null&&src.charAt(0)!="?"&&src.charAt(0)!="&")src="&"+src;var re=new RegExp("[?&]"+key+"=([^&$]*)","i");var offset=src!=null?src.search(re):-1;if(offset==
-1)return null;return RegExp.$1},getParameterByName:function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return results==null?"":decodeURIComponent(results[1].replace(/\+/g," "))},getQueryUrl:function(key){return HRB.tools.getQueryParam(key,location.search)},removeParameter:function(queryString,parameter){var prefix=encodeURIComponent(parameter)+"=";var pars=queryString.split(/[&;]/g);for(var i=pars.length;i-- >
0;)if(pars[i].toLowerCase().lastIndexOf(prefix.toLowerCase(),0)!==-1)pars.splice(i,1);queryString=pars.length>0?pars.join("&"):"";return queryString},getBscId:function(){var strId=Math.random()+"";strId=strId.slice((strId.length-2)*-1);return strId},getCookie:function(key){var tmpcookie=unescape(document.cookie);tmp=tmpcookie.match(new RegExp(key+'=[a-zA-Z0-9-. "(){},=|:%/&_+]+($|;)',"g"));if(!tmp||!tmp[0]||tmp=="")return null;else return tmp[0].substring(key.length+1,tmp[0].length).replace(";","")},
unsetCookie:function(key,path,domain){path=!path||typeof path!="string"?"":path;domain=!domain||typeof domain!="string"?"":domain;if(HRB.tools.getCookie(key))_setCookie(key,"","Thu, 01-Jan-70 00:00:01 GMT",path,domain)}},ui:{BVratings:function(){var api_server="https://api.bazaarvoice.com/data";var api_key="ovsi8a5tfp6mt8dsemh8dkb3b";var prod=false;try{if(window.location.hostname.indexOf("www.hrblock.com")>-1)prod=true;if(!prod){api_server="https://stg.api.bazaarvoice.com/data";api_key="2483w6cqdpex7hlbv3e61c8a9"}}catch(e$7){}var num_items=
5;var api_version="5.4";var productIdMap={free:"201",deluxe:"204",premium:"32",taxproreview:"50",selfemployed:"47",basic_software:"199",deluxe_software:"207",premium_software:"36",business_software:"38"};function requestRatings(productID,cb){$.getJSON(api_server+"/statistics.json?callback=?",{apiversion:api_version,passkey:api_key,filter:"productid:"+productID,stats:"reviews"}).done(cb).fail(function(jqxhr,textStatus,error){cb(textStatus+", "+error)})}function writeRatings($el){var productID=$el.data("bvratingId");
productID=productIdMap[productID]||(isNaN(productID)?null:productID);if(!productID){console.log("data-bvrating-id needs a mapped string or number value");return false}requestRatings(productID,function(json){var reviewCount=json.Results[0].ProductStatistics.ReviewStatistics.TotalReviewCount;var overallRating=Math.round(json.Results[0].ProductStatistics.ReviewStatistics.AverageOverallRating*10)/10;overallRating=overallRating.toFixed(1);var numOfStars=5;var $stars=$el.find("[data-bvrating-stars]");var $rating=
$el.find("[data-bvrating-rating]");var $count=$el.find("[data-bvrating-count]");$rating.text(overallRating).attr("role","presentation");$count.text(reviewCount).attr("role","presentation");$(".bv-rating span.bracket").removeClass("hide");if($stars.length>0)for(var i=1;i<=numOfStars;i++){var starOffset=Math.round(i<=overallRating?0:(1-overallRating%1)*100);var $starInner=$("<div/>",{"class":"star-inner"}).appendTo($("<div/>",{"class":"star-box"}).appendTo($stars));if(i-overallRating<1)$starInner.append($("<div/>",
{"class":"star-highlight",style:"padding-right:"+starOffset+"%"}))}$stars.append('<p class="reader">Rated '+overallRating+" out of 5 stars. "+reviewCount+" reviews.</p>");console.log("bv:","id:",productID,"ovarallRating:",overallRating,"reviewCount:",reviewCount,". set by:",$el)})}return{requestRatings:requestRatings,writeRatings:writeRatings}}(),initializeTpgObject:function(){console.log("TPG: initializeTpgObject : ");var tpgGroup=HRB.ui.getTpgGroup();console.log("TPG: TpgObject : "+JSON.stringify(tpgGroup))},
getTpgGroup:function(){var tpgGroup=localStorage.getItem("tpgGroup");console.log("TPG: getTpgGroup : tpgGroup from LS is '"+tpgGroup+"'");if(!isValidTpgGroup(tpgGroup)){console.log("TPG: Not a valid  tpgGroup from LS object '"+tpgGroup+"' so create/re-create it");tpgGroup=createTpgGroup();localStorage.setItem("tpgGroup",tpgGroup)}return JSON.parse(tpgGroup);function isValidTpgGroup(tpgGroup){var valid=false;try{if(tpgGroup){var tpgGroupObj=JSON.parse(tpgGroup);var priceGroup=tpgGroupObj["priceGroup"];
var expires=tpgGroupObj["expires"];console.log("TPG: priceGroup from LS is '"+priceGroup+"'");if(priceGroup&&(priceGroup.toUpperCase()=="A"||priceGroup.toUpperCase()=="B")&&expires)valid=true;if(new Date>new Date(expires)){console.info("TPG: tpgGroup LS data has expired.");valid=false}}}catch(e$8){console.error("TPG: isValidTpgGroup : exception: "+e$8);valid=false}return valid}function createTpgGroup(){try{var min=0;var max=1;var randomValue=(Math.random()*(max-min)+min).toFixed(2);var priceGroupValue=
randomValue<=.5?"A":"B";tpgGroup={"priceGroup":priceGroupValue,"expires":createExpiryDate()}}catch(e$9){console.error("TPG: createTpgGroup: exception: "+e$9);tpgGroup={};tpgGroup.priceGroup="A";tpgGroup.expires="2020-12-02";console.error("TPG: createTpgGroup: failed creating TpgGroup so use hard coded :"+JSON.stringify(tpgGroup))}return JSON.stringify(tpgGroup)}function createExpiryDate(){var expiryDate="12-01";var year=(new Date).getFullYear();if((new Date).getMonth()==11)year=year+1;var updatedDate=
year+"-"+expiryDate;return updatedDate}},setTpgByProduct:function(){HRB.products.displayPricing()},initializeTprObject:function(){HRB.session.initItem("tprSelections",JSON.stringify(HRB.session.tprSelections))},setTprByProduct:function(){var HRBUI=this;var jsTPRProductId={"js-tpr-47":47,"js-tpr-201":201,"js-tpr-204":204,"js-tpr-32":32};function getProductId(element){var classNames=element.className;var jsClass=classNames.replace(/mdl-checkbox__input/,"").trim();return jsTPRProductId[jsClass]}function handleCheckBoxes(event){var tprSelections=
HRB.session.getValue("tprSelections");var tprSelectionsObj=jQuery.parseJSON(tprSelections);var productID=getProductId(event.target);tprSelectionsObj[productID]=$(event.target).is(":checked")?"Y":"N";HRB.session.storeValue("tprSelections",JSON.stringify(tprSelectionsObj));HRB.products.displayPricing();HRBUI.setMDLTprSelections()}$(document).on("change",'input[class*="js-tpr-"]',function(event){handleCheckBoxes(event)})},setMDLTprSelections:function(){},getTPRbyProduct:function(productId){var tprSelections=
HRB.session.getValue("tprSelections");var tprSelectionsObj=jQuery.parseJSON(tprSelections);var selected="";$.each(tprSelectionsObj,function(i,item){if(i==productId){selected=item;return false}});return selected},setBVRatingsText:function(pid){return},setAccessibilityLandmarks:function(){var obj=$("div.content:first");if(obj.length==1)if(typeof obj.attr("role")==="undefined")obj.attr("role","main")},setAccessibilityTileContentLinkText:function(){$(".tile-cta").each(function(){if(typeof $(this).attr("aria-label")===
"undefined"&&typeof $(this).attr("aria-describedby")==="undefined"&&typeof $(this).attr("aria-labelledby")==="undefined")try{var html=$(this).html();var obj=$(this).closest("div");if(obj.hasClass("tile-content")){var childObj=obj.children(":header(0)");var childTxt=childObj.text();var childHtml=childObj.html();if(childTxt!="undefined"){$(this).attr("aria-label",childObj.text()+". ");$(this).removeAttr("title")}}}catch(e$10){}})},setSoftwareOpSysSelectionText:function(){return;var bAddReader=false;
var osName=null;var readerForWin="Windows operating system selected.";var readerForMac="Mac operating system selected.";var readerTxt=null;$("input[name=product-choice]:radio").each(function(){if(typeof $(this).attr("aria-label")==="undefined")try{if($(this).val()=="win")$(this).attr("aria-label",readerForWin);else if($(this).val()=="mac")$(this).attr("aria-label",readerForMac)}catch(e$11){}})},setSoftwareDownloadAccessibilityText:function(){$(".download-style-1").on("focus",function(event){if(typeof $(this).attr("aria-label")===
"undefined")try{var parentFormObj=$(this).closest("form");var opsys=$("input[name=product-choice]:checked",$(parentFormObj)).val();var labelTxt=$(this).text()+". Current operating system selected is "+(opsys=="win"?"windows. ":opsys=="mac"?"mac. ":"");$(this).attr("aria-label",labelTxt)}catch(e$12){}})},setAccessibilityProductLinkText:function(){var productIdTextXref={201:"Our online free edition product. ",204:"Our online deluxe product. ",50:"Our online tax pro review product. ",32:"Our online premium product. ",
199:"Our basic software. ",207:"Our deluxe plus state software. ",206:"Our deluxe software. ",36:"Our premium software. ",38:"Our premium and business software. ",52:"Basic Online Assist. ",54:"Deluxe Online Assist. ",56:"Premium Online Assist. ",58:"Self-Employed Online Assist. "};$('[class*="track-"]').each(function(){var x=null;var data=null;var action=null;var suffix=null;if(typeof $(this).attr("aria-label")==="undefined")try{x=$.toJSON($(this).data("track"));if(typeof x!="undefined"){data=jQuery.parseJSON(x);
if(typeof $(this).data("track")=="undefined");else if(data.daat=="1");else{suffix="";action=data.type;if(action=="sn"||action=="xxxdn"||action=="lm")if($(this).is("a")){var originalHtml=$(this).html();if(action=="sn")suffix="Start Now. ";else if(action=="dn")suffix="Download Now. ";else if(action=="lm")suffix="Learn More. ";$(this).removeAttr("title");$(this).attr("aria-label",productIdTextXref[data.pid]+suffix)}}}}catch(e$13){}})},setDisclaimerBehavior:function(){function openDisclaimer($button,
$list){$list.slideDown("fast");$button.attr("aria-expanded","true");$button.find("span.icon-caret-right").removeClass("icon-caret-right").addClass("icon-caret-down")}function closeDisclaimer($button,$list){$list.slideUp("fast");$button.attr("aria-expanded","false");$button.find("span.icon-caret-down").removeClass("icon-caret-down").addClass("icon-caret-right")}function closeAllSecondaryDisclaimers(){$("#legal-disclaimer ol").slideUp("fast");$('#legal-disclaimer [id^="disclaimer-link-"]').attr("aria-expanded",
"false");$('#legal-disclaimer [id^="disclaimer-link-"]').find("span.icon-caret-down").removeClass("icon-caret-down").addClass("icon-caret-right")}function toggleDisclaimer($button,$list){var disclaimerIsOpen=$button.attr("aria-expanded"),notPrimaryBtn=$button.attr("id")!=="disclaimer-link";if(disclaimerIsOpen=="true")closeDisclaimer($button,$list);else{if(notPrimaryBtn)closeAllSecondaryDisclaimers();openDisclaimer($button,$list)}}$("#legal-disclaimer #disclaimer-link").on("click",function(){var $disclaimerBtn=
$(this),$disclaimerList=$("#disclaimer-list");toggleDisclaimer($disclaimerBtn,$disclaimerList)});$("#legal-disclaimer").on("click",'[id^="disclaimer-link-"]',function(){var $disclaimerBtn=$(this),$disclaimerList=$disclaimerBtn.next("ol");toggleDisclaimer($disclaimerBtn,$disclaimerList)});$("body").on("click",".js-disclaimer-link",function(){var disclaimerNumber=$(this).text().replace(/\D/g,""),$disclaimerLink=$(this);if(disclaimerNumber!=undefined&&disclaimerNumber.length==0)disclaimerNumber=$(this).data("disclaimer")?
$(this).data("disclaimer"):disclaimerNumber;var linkPosition=$(window).scrollTop();var $disclaimerBtn=$("#legal-disclaimer #disclaimer-link"),$disclaimerList=$("#disclaimer-list");openDisclaimer($disclaimerBtn,$disclaimerList);if(disclaimerNumber<20){$disclaimerBtn=$("#disclaimer-link-full-site");$disclaimerList=$("#disclaimer-list-full-site")}else if(disclaimerNumber>=20&&disclaimerNumber<40){$disclaimerBtn=$("#disclaimer-link-file-online");$disclaimerList=$("#disclaimer-list-file-online")}else if(disclaimerNumber>=
40&&disclaimerNumber<60){$disclaimerBtn=$("#disclaimer-link-tax-software");$disclaimerList=$("#disclaimer-list-tax-software")}else if(disclaimerNumber>=60&&disclaimerNumber<79);else if(disclaimerNumber>=79&&disclaimerNumber<109){$disclaimerBtn=$("#disclaimer-link-retail");$disclaimerList=$("#disclaimer-list-retail")}else if(disclaimerNumber>=109&&disclaimerNumber<160){$disclaimerBtn=$("#disclaimer-link-financial-services");$disclaimerList=$("#disclaimer-list-financial-services")}else if(disclaimerNumber>=
160){$disclaimerBtn=$("#disclaimer-link-itc");$disclaimerList=$("#disclaimer-list-itc")}closeAllSecondaryDisclaimers();openDisclaimer($disclaimerBtn,$disclaimerList);$("#legal-disclaimer #disclaimer-return-btn").remove();$("#legal-disclaimer li").removeClass("disclaimer-highlight");$('#legal-disclaimer li[data-disclaimer-number="'+disclaimerNumber+'"]').addClass("disclaimer-highlight");var $activeDisclaimer=$(".disclaimer-highlight"),originalHtml=$activeDisclaimer.html();$activeDisclaimer.html('<button id="disclaimer-return-btn" tabindex="-1"><span class="icon-caret-up"></span><span class="reader">Back to previous position</span></button> '+
originalHtml+' <span class="reader">Use Escape or Return to go back to previous position</span>');if($activeDisclaimer.length!==0)setTimeout(function(){$("html,body").animate({scrollTop:$activeDisclaimer.offset().top-190+"px",complete:$("#disclaimer-return-btn").focus()})},500);$("#legal-disclaimer li.disclaimer-highlight").off("click keydown").on("click keydown",function(e){if(e.target.nodeName!="A"){e.stopPropagation();e.preventDefault();if(e.type=="click"||e.keyCode==13||e.keyCode==27||e.keyCode==
9){$("html,body").animate({scrollTop:linkPosition+"px"});$activeDisclaimer.html(originalHtml);$disclaimerLink.focus()}}})});$('a[href="#legal-disclaimer"]').each(function(){$(this).attr("href","javascript:void(0)");var html=$(this).html();$(this).html('<span class="reader">Disclaimer number </span><span>'+html+'</span><span class="reader">. Scrolls to bottom of page.</span>')})},deleteAllPods:function(exceptThisPod){$(".pod-info").each(function(index){var data=jQuery.parseJSON($.toJSON($(this).data("pod-info")));
if(data.path!=exceptThisPod)$(this).remove()});$("header").remove();$("footer").remove();$("#mobile-nav").remove();$(".extra-help").remove();$(".partner-footer").remove();$(".splash").remove();$("#legal-disclaimer").remove();$("iframe").remove()},setAccessibilityForBlankTarget:function(){$("a[target='_blank']").each(function(e){var url=$(this).attr("href");if(typeof $(this).attr("onclick")==="undefined")if(url.indexOf("#")==-1)if(typeof $(this).attr("aria-label")==="undefined"&&typeof $(this).attr("aria-labelledby")===
"undefined"&&typeof $(this).attr("aria-describedby")==="undefined"){var _text=$(this).text();if(_text.match(".$"))_text=_text.substr(0,_text.length);_text=_text+". Link opens in new window.";$(this).attr("aria-label",_text)}});$("a").each(function(){if($(this).attr("href")=="#")$(this).attr("href","javascript:void(0)");if($(this).text().length==0){var _aria_label=$(this).attr("aria-label");var _title=$(this).attr("title");var bAriaFound=false;var bTitleFound=false;if(typeof _aria_label!="undefined"&&
_aria_label.length>0)bAriaFound=true;if(typeof _title!="undefined"&&_title.length>0)bTitleFound=true;if(!bAriaFound&&!bTitleFound);}})},setAccessibilityHeadingTags:function(){$(".tile .tile-content").each(function(){var h3Obj=$(this).find("h3");if(h3Obj!="undefined"){var h2Obj=h3Obj.clone().insertAfter(h3Obj);h2Obj.replaceWith($("<h2 class='reader'>"+h3Obj.html()+"</h2>"));h3Obj.attr("aria-hidden","true")}})},setAccessibilityArticleTags:function(){$("article").each(function(){if(typeof $(this).attr("aria-label")===
"undefined"&&typeof $(this).attr("aria-labelledby")==="undefined")try{var headText=$(this).find(":header").first().text();if(headText!=""){$(this).attr("aria-label",headText);$(this).attr("role","contentinfo")}else{$(this).attr("aria-label","Article detailed information");$(this).attr("role","contentinfo")}}catch(e$14){}})},select:function(){var $selectBox=null;var $component=null;var $id=null;var $selectBoxContainer=null;var $dropDown=null;var $index=-1;var $li=null;var TAB_KEY=9;var ENTER_KEY=13;
var ESC_KEY=27;var SPACE_BAR_KEY=32;var UP_ARROW_KEY=38;var DOWN_ARROW_KEY=40;return{config:function(component){$component=component;$id=$($component).attr("id");this.initialize();this.handlers()},initialize:function(){$selectBoxContainer=$("<div>",{width:$($component).outerWidth(),html:'<div class="'+$id+' select-box" tabindex="0"></div>'});$selectBoxContainer.addClass("ui-select");$selectBoxContainer.attr("role","combobox");$selectBoxContainer.attr("aria-live","polite");$selectBoxContainer.attr("aria-autocomplete",
"list");$selectBoxContainer.attr("aria-haspopup","true");$selectBoxContainer.attr("aria-expandeded","false");$selectBoxContainer.attr("aria-owns","");$selectBoxContainer.attr("aria-label","Press enter key or spacebar to toggle the menu. Choose item using up or down arrow. ");$dropDown=$("<ul>");$dropDown.addClass("drop-down");$index=-1;$dropDown.attr("tabindex","-1");$dropDown.attr("aria-hidden","true");$dropDown.attr("role","listbox");$selectBox=$selectBoxContainer.find("."+$id);$($component).find("option").each(function(i){var option=
$(this);if(i==$($component).attr("selectedIndex")){$selectBox.html(option.text());$index=i-1}if(option.data("skip")){$selectBox.html(option.text());return true}var data="";if(option.data("icon"))data='<img src="'+option.data("icon")+'">';if(option.data("html-text"))data=data+"<span>"+option.data("html-text")+"</span>";var li=$("<li>",{html:data});li.attr("role","option");li.click(function(){$selectBox.html(option.text());$dropDown.trigger("hide");$component.val(option.val());return false});$($dropDown).append(li)});
$selectBoxContainer.append($dropDown.hide());$($component).hide();$($component).after($selectBoxContainer)},handlers:function(){$dropDown.bind("show",function(){if($dropDown.is(":animated"))return false;$selectBoxContainer.css("z-index","99999");$selectBoxContainer.attr("aria-expandeded","true");$selectBox.addClass("expanded");$dropDown.attr("aria-hidden","false");$dropDown.slideDown()}).bind("hide",function(){if($dropDown.is(":animated"))return false;$selectBoxContainer.attr("aria-expandeded","true");
$selectBox.removeClass("expanded");$dropDown.attr("aria-hidden","true");$dropDown.slideUp(function(){$selectBoxContainer.css("z-index","0")})}).bind("toggle",function(){if($selectBox.hasClass("expanded"))$dropDown.trigger("hide");else $dropDown.trigger("show")});$selectBox.click(function(){$dropDown.trigger("toggle");return false});$selectBox.blur(function(){$dropDown.trigger("hide");return false});$selectBox.bind("keydown",function(e){if(e.keyCode==ENTER_KEY||e.keyCode==SPACE_BAR_KEY){if($li!=null){$selectBox.html($li.text());
$($id).val($li.val())}$dropDown.trigger("toggle")}if(e.keyCode==ESC_KEY)$dropDown.trigger("hide");if(e.keyCode==DOWN_ARROW_KEY){var $children=$dropDown.children();$children.removeClass("hover");if($index<$children.length-1)$index++;$children.each(function(i){if(i==$index)$li=$(this)});$li.addClass("hover");return false}else if(e.keyCode==UP_ARROW_KEY){if($index>0)$index--;else $index=0;var $children=$dropDown.children();$children.removeClass("hover");$li=null;$children.each(function(i){if(i==$index)$li=
$(this)});$li.addClass("hover");return false}else if(e.keyCode==TAB_KEY)return true;return false})}}},accordion:function(){var $accordion;var $accordions;var TAB_KEY=9;var ENTER_KEY=13;var ESC_KEY=27;var SPACE_BAR_KEY=32;var UP_ARROW_KEY=38;var DOWN_ARROW_KEY=40;var $prev=null;var $prevClickedObj=null;return{config:function(accordion){$accordion=accordion;$accordion.attr("role","tablist");$($accordion).find(".accordion-toggle").attr("tabindex","0");$($accordion).find(".accordion-toggle").attr("role",
"tab");$($accordion).find(".accordion-toggle").attr("aria-expanded","false");$($accordion).find(".accordion-toggle").attr("aria-selected","false");$($accordion).find(".accordion-body").attr("aria-hidden","true");$($accordion).find(".accordion-body").attr("role","tabpanel");$($accordion).find(".accordion-body").find("a").attr("tabindex","-1");_this=this;this.initialize();this.handlers()},initialize:function(){$accordions=$($accordion).find(".accordion-toggle");$($accordions).each(function(ind){var $aria_controls=
$(this).attr("href");$aria_controls=$aria_controls.substr(1);$(this).attr("aria-controls",$aria_controls)})},handlers:function(){$accordions.bind("focus",function(e){if($prev!=null&&$prev!=this){$($prev).removeClass("in");$($prev).addClass("collapsed");$($prev).attr("aria-selected","false");$($prev).attr("aria-expanded","false");$($accordion).find("#"+$($prev).attr("aria-controls")).attr("aria-hidden","true");$($accordion).find("#"+$($prev).attr("aria-controls")).attr("tabindex","-1");$($accordion).find("#"+
$($prev).attr("aria-controls")).find("a").attr("tabindex","-1");$($accordion).find("#"+$($prev).attr("aria-controls")).removeClass("in");$($accordion).find("#"+$($prev).attr("aria-controls")).animate({height:"0px"})}if($prev!=this){$(this).attr("aria-label",$(this).text()+". Press spacebar to toggle the menu. ");$(this).attr("aria-selected","true")}$prev=this});$accordions.bind("click",function(e){if($(this).is(".in")){$($accordion).find("#"+$(this).attr("aria-controls")).find("a").attr("tabindex",
"-1");$(this).attr("aria-selected","false");$(this).attr("aria-expanded","false");$($accordion).find("#"+$(this).attr("aria-controls")).attr("aria-hidden","true")}else{$($accordion).find("#"+$(this).attr("aria-controls")).find("a").attr("tabindex","0");$(this).attr("aria-selected","true");$(this).attr("aria-expanded","true");$($accordion).find("#"+$(this).attr("aria-controls")).attr("aria-hidden","false")}if($prevClickedObj!=null&&$prevClickedObj!=this){$($accordion).find("#"+$($prevClickedObj).attr("aria-controls")).find("a").attr("tabindex",
"-1");$($prevClickedObj).attr("aria-selected","false");$($prevClickedObj).attr("aria-expanded","false");$($accordion).find("#"+$($prevClickedObj).attr("aria-controls")).attr("aria-hidden","true")}if($prevClickedObj!=this){$(this).attr("aria-label",$(this).text()+". Press spacebar to toggle the menu. ");$(this).attr("aria-selected","true")}$prevClickedObj=this});$accordions.bind("keydown",function(e){if(e.keyCode==ENTER_KEY||e.keyCode==SPACE_BAR_KEY){_this.toggle(this);return false}else if(e.keyCode==
ESC_KEY){if($prev!=null){$($prev).removeClass("in");$($prev).addClass("collapsed");$($prev).attr("aria-selected","false");$($prev).attr("aria-expanded","false");$($accordion).find("#"+$($prev).attr("aria-controls")).attr("aria-hidden","true");$($accordion).find("#"+$($prev).attr("aria-controls")).attr("tabindex","-1");$($accordion).find("#"+$($prev).attr("aria-controls")).find("a").attr("tabindex","-1");$($accordion).find("#"+$($prev).attr("aria-controls")).removeClass("in");$($accordion).find("#"+
$($prev).attr("aria-controls")).animate({height:"0px"})}}else if(e.keyCode==DOWN_ARROW_KEY){var curNdx=$accordions.index(this);var $nextAcc=null;if(curNdx==$accordions.length-1)$nextAcc=$accordions.first();else $nextAcc=$accordions.eq(curNdx+1);$($nextAcc).focus();return true}else if(e.keyCode==UP_ARROW_KEY){var curNdx=$accordions.index(this);var $prevAcc=null;if(curNdx==0)$prevAcc=$accordions.last();else $prevAcc=$accordions.eq(curNdx-1);$($prevAcc).focus();return true}})},toggle:function(obj){if($(obj).is(".collapsed"))_this.show(obj);
else _this.hide(obj)},show:function(obj){$(obj).attr("aria-expanded","true");$(obj).addClass("in");$(obj).removeClass("collapsed");$($accordion).find("#"+$(obj).attr("aria-controls")).attr("aria-hidden","false");$($accordion).find("#"+$(obj).attr("aria-controls")).addClass("in");$($accordion).find("#"+$(obj).attr("aria-controls")).attr("tabindex","0");$($accordion).find("#"+$(obj).attr("aria-controls")).css("height","auto");$($accordion).find("#"+$(obj).attr("aria-controls")).find("a").attr("tabindex",
"0")},hide:function(obj){$(obj).attr("aria-expanded","false");$(obj).addClass("collapsed");$(obj).removeClass("in");$($accordion).find("#"+$(obj).attr("aria-controls")).attr("aria-hidden","true");$($accordion).find("#"+$(obj).attr("aria-controls")).removeClass("in");$($accordion).find("#"+$(obj).attr("aria-controls")).attr("tabindex","-1");$($accordion).find("#"+$(obj).attr("aria-controls")).css("height","0px");$($accordion).find("#"+$(obj).attr("aria-controls")).find("a").attr("tabindex","-1")}}}},
permanent:{config:{"per_val":"PERMANENT","overlay":"PERMANENT","tpgGroup":"PERMANENT"},storeValue:function(name,value){HRB.tools.log("permanent.storeValue("+name+","+value+")");var _store=HRB.permanent.config[name];if(_store=="PERMANENT")if("localStorage"in window&&window["localStorage"]!==null)if(!HRB.session.sessionStorageStatus.isPrivateBrowsing)localStorage[name]=value;else HRB.tools.log("permanent.storeValue("+name+","+value+"). Apple Private Browse detected. Cookie/Local Storage disabled."+
name+" will not be written.")},getValue:function(name){var _store=HRB.permanent.config[name];if(_store=="PERMANENT")if("localStorage"in window&&window["localStorage"]!==null)if(typeof localStorage[name]!=="undefined")if(localStorage[name]!=="null"&&localStorage[name].indexOf("data")>0)return localStorage[name];else return null;else return null}},session:{config:{"initialReferer":{"typ":"STORE","lvl":"root"},"testSS":{"typ":"STORE","lvl":"root"},"olay":{"typ":"STORE","lvl":"root"},"ci":{"typ":"STORE",
"lvl":"root"},"bvReviewSelector":{"typ":"STORE","lvl":"root"},"refundEst":{"typ":"STORE","lvl":"root"},"wsc":{"typ":"STORE","lvl":"sub"},"main_cookie":{"typ":"COOKIE","lvl":"root"},"camry_cookie":{"typ":"EITHER","lvl":"sub"},"bsc_sessiontrack":{"typ":"COOKIE","lvl":"root"},"digitalriver":{"typ":"COOKIE","lvl":"root"},"hrblockCampaignIDcookie":{"typ":"COOKIE","lvl":"sub"},"hrbopfc":{"typ":"COOKIE","lvl":"sub"},"HRBStore":{"typ":"COOKIE","lvl":"sub"},"OI":{"typ":"STORE","lvl":"root"},"CityImgData":{"typ":"STORE",
"lvl":"root"},"calculatorUsage":{"typ":"STORE","lvl":"sub"},"tpfUsage":{"typ":"STORE","lvl":"sub"},"drawer":{"typ":"STORE","lvl":"sub"},"bundle":{"typ":"STORE","lvl":"sub"},"testAndTarget":{"typ":"STORE","lvl":"sub"},"softwareHelp":{"typ":"STORE","lvl":"sub"},"noByAddr":{"typ":"STORE","lvl":"sub"},"noByLoc":{"typ":"STORE","lvl":"sub"},"tprSelections":{"typ":"STORE","lvl":"sub"}},sessionStorageStatus:{"storageTested":false,"isSupported":false,"isEnabled":false,"isPrivateBrowsing":false},storeValue:function(name,
value){HRB.tools.log("3.1) session.storeValue("+name+","+value+")");HRB.tools.log("3.2) session.storeValue:"+JSON.stringify(HRB.session.sessionStorageStatus));if(typeof HRB.session.config[name]=="undefined"){HRB.session.config[name]={};HRB.session.config[name].typ="STORE";HRB.session.config[name].lvl="sub"}var _store=HRB.session.config[name].typ;var _lvl=HRB.session.config[name].lvl;if(name=="testSS"){HRB.tools.log("3.3) session.storeValue: testing session storage now...");if(typeof Storage!=="undefined"){HRB.session.sessionStorageStatus.isSupported=
true;HRB.tools.log("3.4) session.storeValue: session storage supported!");try{sessionStorage["testSS"]="1";HRB.tools.log("3.4a) session.storeValue: session storage enabled!");HRB.session.sessionStorageStatus.isEnabled=true}catch(e$15){HRB.tools.log("3.4b) session.storeValue: session storage disabled!");HRB.session.sessionStorageStatus.isEnabled=false;HRB.session.sessionStorageStatus.isPrivateBrowsing=true}}HRB.session.sessionStorageStatus.storageTested=true;HRB.tools.log("3.5) session.storeValue: "+
JSON.stringify(HRB.session.sessionStorageStatus));return}HRB.tools.log("4.0) This cookie "+name+" has type "+_store);HRB.tools.log("4.1) "+JSON.stringify(HRB.session.sessionStorageStatus));if(HRB.session.sessionStorageStatus.isSupported&&!HRB.session.sessionStorageStatus.isEnabled){HRB.tools.log("4.2) session.storeValue("+name+","+value+"). Apple Private Browse detected. Cookie/Local Storage disabled."+name+" will not be written.");return false}if(_store=="EITHER")if(typeof Storage!=="undefined")try{HRB.tools.log("5.1a) setting "+
name+" as a COOKIE with value "+value);sessionStorage[name]=value;return true}catch(e$16){HRB.tools.log("5.1b) session.storeValue("+name+","+value+"):"+e$16.message);return false}else{HRB.tools.log("5.1c) session.storeValue("+name+","+value+"):"+e.message);_setSessionCookie(name,value,_lvl)}else if(_store=="COOKIE"){HRB.tools.log("5.2) setting "+name+" as a COOKIE with value "+value);_setSessionCookie(name,value,_lvl)}else if(_store=="STORE")if(typeof Storage!=="undefined")try{HRB.tools.log("5.3a) setting "+
name+" as a COOKIE with value "+value);sessionStorage[name]=value;return true}catch(e$17){HRB.tools.log("5.3b) session.storeValue("+name+","+value+"):"+e$17.message);return false}},getValue:function(name){var store;if(typeof HRB.session.config[name]=="undefined")store="STORE";else store=HRB.session.config[name].typ;HRB.tools.log("1) session storage: getValue("+name+") of type "+store);if(store=="EITHER")if(typeof Storage!=="undefined")if(typeof sessionStorage[name]!=="undefined"){HRB.tools.log("2a) session storage: getValue("+
name+") of type "+store+" returned from storage");return sessionStorage[name]}else{HRB.tools.log("2b) session storage: getValue("+name+") of type "+store+" returning null");return null}else{HRB.tools.log("2c) session storage: getValue("+name+") of type "+store+" returning from cookie");return HRB.tools.getCookie(name)}else if(store=="COOKIE"){HRB.tools.log("3) session storage: getValue("+name+") of type "+store+" returning from cookie");return HRB.tools.getCookie(name)}else if(store=="STORE")if(typeof sessionStorage[name]!==
"undefined"){HRB.tools.log("4a) session storage: getValue("+name+") of type "+store+" returned from storage");return sessionStorage[name]}else{HRB.tools.log("4b) session storage: getValue("+name+") of type "+store+" returning null");return null}},removeItem:function(key){sessionStorage.removeItem(key)},initItem:function(key,value){sessionStorage[key]=value},officePod:{"clientInfo":{"lat":"","lon":"","distanceToMyOffice":"","cityImageAddressUrl":"","geoPromptCount":"0","geoPromptAnswered":"0","no":{"mapUrl":"",
"tax_id":""}},"oi":{"mapUrl":"","tax_id":""}},clientInfo:{"location":{"byCurrentPosition":{"lat":"","lon":""},"byAddress":{"lat":"","lon":"","address":""}},"geoAskedAlready":false,"geoAllowed":false},noByAddr:{"srchAddr":"","srchLat":"","srchLon":""},noByLoc:{"srchLat":"","srchLon":""},calculatorUsage:{"te":{"s":0,"c":0},"w4":{"s":0,"c":0},"hc":{"s":0,"c":0}},tpfUsage:{"contactId":0,"emeraldSeasonStartDate":"","emeraldPreSeasonStartDate":"","emeraldSeasonEndDate":"","taxSeasonStartDate":"","taxSeasonEndDate":""},
testSessionStorage:function(){HRB.session.storeValue("testSS","0")},tprSelections:{201:"N",204:"N",32:"N",47:"N"}},location:{getLocation:{"ip":"168.137.32.32","country_code":"US","country_name":"United States","region_code":"MO","region_name":"Missouri","city":"Kansas City","zipcode":"64111","latitude":39.0572,"longitude":-94.5933,"metro_code":"616","areacode":"816"},getCurrentLocation:function(callbackSuccess,callbackFailure){var ci=HRB.session.getValue("ci");if(ci==null)HRB.session.initItem("ci",
JSON.stringify(HRB.session.clientInfo));var ciObj=jQuery.parseJSON(ci);if(ciObj.geoAllowed){var pos={};pos.coords={};pos.coords.latitude=ciObj.location.byCurrentPosition.lat;pos.coords.longitude=ciObj.location.byCurrentPosition.lon;callbackSuccess(pos)}else{ciObj.geoAskedAlready=true;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(pos){ciObj.location.byCurrentPosition.lat=pos.coords.latitude;ciObj.location.byCurrentPosition.lon=pos.coords.longitude;ciObj.geoAllowed=true;
HRB.session.storeValue("ci",JSON.stringify(ciObj));callbackSuccess(pos)},function(error){ciObj.geoAllowed=false;HRB.session.storeValue("ci",JSON.stringify(ciObj));switch(error.code){case error.PERMISSION_DENIED:HRB.locator.geoDenied=true;break;case error.POSITION_UNAVAILABLE:break;case error.TIMEOUT:break;case error.UNKNOWN_ERROR:break}callbackFailure(error)});else{ciObj.geoAllowed=false;HRB.session.storeValue("ci",JSON.stringify(ciObj));callbackFailure(null)}}}},search:{getSearch:function(opts){opts.event.preventDefault();
term=opts.form.searchbox.value;var where=opts.form.sectionbox!=undefined?opts.form.sectionbox.value:null;var var1=where!=null?"x1=section;q1="+where+";":"";if(term==""){alert("please enter text to search");return false}else searchurl="http://"+HRB.integration.getURL("SEARCH")+".hrblock.com/?"+var1+"q="+escape(term);if(HRB.test)return searchurl;location.href=searchurl}},locator:{baOffice:false,officeId:null,isBAOffice2:function(officeId){var url="/locator-service/officeservice/tpf/001/data/getOfficeDetailsByTaxID";
$.ajax({url:url+"?oid="+officeId,async:false,method:"GET",success:function(poResponse){if(poResponse&&poResponse.ftLocations&&poResponse.ftLocations.length>0)if(poResponse.ftLocations[0].aff_nm=="BA"){HRB.locator.baOffice=true;HRB.locator.officeType="BA"}else{HRB.locator.baOffice=false;HRB.locator.officeType="REG"}else{HRB.locator.baOffice=false;HRB.locator.officeType=""}},error:function(e){HRB.tools.log("isBAOffice2 Failed : "+e);HRB.locator.officeType=""}})},getRootPath:function(officeType){if(officeType==
null){var oi=HRB.session.getValue("OI");var oiObj=jQuery.parseJSON(oi);var officeType=oiObj.clientInfo.no.officeType;if(officeType=="BA")return"/ba-appointments/tax-offices/local-offices/";else return"/tax-offices/local-offices/"}else if(officeType=="BA")return"/ba-appointments/tax-offices/local-offices/";else return"/tax-offices/local-offices/"},getOfficeProfilePath:function(officeType){return HRB.locator.getRootPath(officeType)+"index.html#!/"+HRB.locator.getLocale()+"/office-profile/"},getAppointmentCalendarPath:function(officeType){return HRB.locator.getRootPath(officeType)+
"appointment-setting.html#/"+HRB.locator.getLocale()+"/calendar/"},getAppointmentPath:function(officeType){return HRB.locator.getRootPath(officeType)+"appointment-setting.html#/"+HRB.locator.getLocale()+"/appointment/"},getOfficeDirectionPath:function(officeType){return HRB.locator.getRootPath(officeType)+"office-directions.html#!/"+HRB.locator.getLocale()+"/direction/"},getOfficeLocatorPath:function(officeType){return HRB.locator.getRootPath(officeType)+"index.html#!/"+HRB.locator.getLocale()+"/office-locator/"},
getOfficesForAddressOrZip:function(officeType){return HRB.locator.getRootPath(officeType)+"index.html#!/"+HRB.locator.getLocale()+"/office-list/"},getLocale:function(){var locale="en";try{if(window.location.pathname&&window.location.pathname.indexOf("espanol")==1)locale="es"}catch(e$18){}return locale},mapSize:"170x140",geoSupport:false,geoDenied:false,geoUnavailable:false,geoTimeout:false,geoError:false,default_opts:{url:"/tax-offices/local-offices/#!/en/office-list/",typemap:{"hc":"healthcare=1",
"samplekey":"value"}},getLocations:function(opts){var def=HRB.locator.default_opts;opts.event.preventDefault();var zip=opts.form.zipcode.value;if(zip==""){$(".map-office-pod .find-office-txt").html("Address cannot be blank");$(".map-office-pod .find-office-txt").css({"color":"red"});return false}var finalurl=def.url+zip;if(typeof opts.type!="undefined")finalurl+="&"+def.typemap[opts.type];if(HRB.libraries.isHrObj()&&HR.Utils.isMobile.any()){finalurl="/tax-offices/local-offices/#!/en/office-list/"+
zip;HRB.tools.log("mobile:"+HRB.libraries.isHrObj()&&HR.Utils.isMobile.any())}HRB.tools.log("Form submitted post to "+finalurl);location.href=finalurl},updateSessionInfoAfterAppointmentMade:function(){},formatAddress:function(addr1,addr2,addr3,city,state,zip){var fa=$.trim(addr1);if(addr2!="")fa+="<br>"+$.trim(addr2);fa+="<br>"+city+","+state+" "+zip;return fa},getOfficeHours:function(o){var resp={"seasonClosed":"","pastClosing":"","hours":"","closed":""};var days=["sun","mon","tues","wed","thur",
"fri","sat"];var today=days[(new Date).getDay()];var hours=o["week1_"+days[(new Date).getDay()]];if(hours!=null&&hours.indexOf(">")>-1){oh=hours.substr(hours.indexOf(">")+1);if(oh.toLowerCase()=="closed")if(HRB.tools.getQueryUrl("ol")=="force-my-office-open")resp.hours="9 - 4";else{resp.closed="1";resp.hours="Closed"}else resp.hours=oh}if(HRB.tools.getQueryUrl("ol")=="office-closed")resp.closed="1";return resp},getNearestOfficeInfoOnly:function(reqObj,callbackSuccess,callbackFailure){var url="/locator-service/officeservice/ol/001/jsonp/getOfficeDetailsOrderByDistance?query=";
url=url+"lt:"+reqObj.lat+","+reqObj.lon+"|d:80|s:s&callback=?";var noObj={};HRB.tools.log("getNearestOfficeInfoOnly: Nearest office url : "+url);$.getJSON(url,null,function(r){if(typeof r=="undefined"){HRB.tools.log("getNearestOfficeInfoOnly:getOfficeDetailsOrderByDistance:no response");callbackFailure(noObj)}else if(typeof r.statusCode!="undefined"&&r.statusCode.toLowerCase()=="failed"){HRB.tools.log("getNearestOfficeInfoOnly:getOfficeDetailsOrderByDistance:status:"+r.statusCode+","+r.statusMessage);
callbackFailure(noObj)}else if(typeof r.ftLocations!="undefined"&&r.ftLocations!=null&&r.ftLocations.length>0){var officeObj=r.ftLocations[0];for(var index=0;index<r.ftLocations.length;index++){officeObj=r.ftLocations[index];if(officeObj.fatp_ind!=0&&officeObj.aff_nm!="BA"&&(officeObj.cdas==2||officeObj.yr_round_ind==1))break;officeObj=null}if(officeObj!=null){HRB.tools.log("officeObj : "+JSON.stringify(officeObj));noObj.tax_id=officeObj.tax_id;if(officeObj.aff_nm=="BA"){HRB.locator.baOffice=true;
HRB.locator.officeType="BA"}else{HRB.locator.baOffice=false;HRB.locator.officeType="REG"}noObj.officeType=HRB.locator.officeType;noObj.latitude=officeObj.Latitude;noObj.longitude=officeObj.Longitude;noObj.addressLine=officeObj.AddressLine;noObj.addressLine2=officeObj.AddressLine2;noObj.addressLine3=officeObj.AddressLine3;noObj.primaryCity=officeObj.PrimaryCity;noObj.subdivision=officeObj.Subdivision;noObj.seas_close_ind=officeObj.seas_close_ind;noObj.postalCode=officeObj.PostalCode;noObj.countryRegion=
officeObj.CountryRegion;noObj.distance=officeObj.distance;noObj.tax_phone=officeObj.tax_phone;noObj.week1_sun=officeObj.week1_sun;noObj.week1_mon=officeObj.week1_mon;noObj.week1_tues=officeObj.week1_tues;noObj.week1_wed=officeObj.week1_wed;noObj.week1_thur=officeObj.week1_thur;noObj.week1_fri=officeObj.week1_fri;noObj.week1_sat=officeObj.week1_sat;noObj.seas_close_ind=officeObj.seas_close_ind;noObj.fatp_ind=officeObj.fatp_ind;noObj.formattedAddress=HRB.locator.formatAddress(noObj.addressLine,noObj.addressLine2,
noObj.addressLine3,noObj.primaryCity,noObj.subdivision,noObj.postalCode);if(HRB.settings.officeMaps.enableSignedUrlCall){HRB.tools.log("getNearestOfficeMapUrl():get signed url...");var req=[{"path":"","query":"","key":"1"}];req[0].path="/maps/api/staticmap";req[0].query="center="+noObj.latitude+","+noObj.longitude+"&client=gme-hrbtaxgroupinc1&zoom=15&size="+HRB.locator.mapSize+"&sensor=false&markers=color:green%7Clabel:*%7C"+noObj.latitude+","+noObj.longitude+"";var reqStr=escape(JSON.stringify(req));
$.getJSON("/locator-service/officeservice/ol/001/jsonp/getSignedURL?req="+reqStr+"&callback=?",null,function(dd){if(typeof dd=="undefined")HRB.tools.log("getNearestOfficeMapUrl:getSignedURL:no response");if(dd.status.toLowerCase()=="failed")HRB.tools.log("getNearestOfficeMapUrl:getSignedURL:status:"+r.status+","+r.statusMessage);else{HRB.tools.log("getNearestOfficeMapUrl():signed url..."+noObj.mapUrl);noObj.mapUrl="//maps.googleapis.com"+dd.signedURL[1]}})}noObj.todaysHours=HRB.locator.getOfficeHours(noObj);
noObj.officeDetailsUrl=HRB.locator.getOfficeProfilePath(noObj.officeType)+noObj.tax_id;noObj.makeApptUrl=HRB.locator.getAppointmentCalendarPath(noObj.officeType)+noObj.tax_id;noObj.directionsUrl=HRB.locator.getOfficeDirectionPath(noObj.officeType)+noObj.postalCode;if(noObj.fatp_ind!=1){noObj.showMakeApptCTA=false;noObj.showCallOfficeCTA=true}else{noObj.showMakeApptCTA=true;noObj.showCallOfficeCTA=false}callbackSuccess(noObj)}else callbackFailure(noObj)}else{HRB.tools.log("getNearestOfficeInfoOnly:getOfficeDetailsOrderByDistance:status:"+
r.statusCode+","+r.statusMessage);callbackFailure(noObj)}})},getNextAppointmentTime:function(officeId,callbackSuccess,callbackFailure){var nextApptObj={"apptDate":"","apptTime":"","apptLink":"","msg":""};HRB.locator.getContactId(function(tpfUsageObj){var contactId=tpfUsageObj.contactId;HRB.tools.log("Office Pod contactId - "+contactId);HRB.locator.getAppointments(officeId,tpfUsageObj,null,function(officeAppointmentList){if(officeAppointmentList.length>0&&officeAppointmentList[0].appointmentList!=
null&&officeAppointmentList[0].appointmentList.length>0){var appointmentList=officeAppointmentList[0].appointmentList;var itemsPerPage=1;var total=appointmentList.length;if(total>itemsPerPage)appointmentList=appointmentList.slice(0,itemsPerPage);for(var index=0;index<appointmentList.length;index++){var obj=appointmentList[index];var linkPattern=officeId+"/"+obj.appointmentToken;if(obj.employeeId!=null&&obj.employeeId!=0)linkPattern=officeId+"/"+obj.employeeId+"/"+obj.appointmentToken;var displayStartTime=
obj.formattedStartDate.replace(/\s+/g,"");var date=displayStartTime.substring(0,displayStartTime.lastIndexOf("/"));var startTime=displayStartTime.substring(displayStartTime.indexOf("|")+1,displayStartTime.length);if(index==0){nextApptObj.apptDate=date;nextApptObj.apptTime=startTime;nextApptObj.apptLink=HRB.locator.getAppointmentPath("NON-BA")+linkPattern;nextApptObj.msg="appointment found";callbackSuccess(nextApptObj)}}}else{nextApptObj.msg="no appointment found";callbackSuccess(nextApptObj)}},function(jqXHR,
textStatus,e){respMsg=textStatus;nextApptObj.msg=respMsg;callbackFailure(nextApptObj)})},function(jqXHR,textStatus,e){respMsg=textStatus;nextApptObj.msg=respMsg;callbackFailure(nextApptObj)})},formatSysDate:function(){var sysTime=new Date;var sysMonth=sysTime.getMonth()+1;var sysDay=sysTime.getDate();var sysYear=sysTime.getFullYear();var date=sysYear+"-";if(sysMonth<10)date=date+"0"+sysMonth+"-";else date=date+sysMonth+"-";if(sysDay<10)date=date+"0"+sysDay;else date=date+sysDay;return date},getUserLocaleTime:function(){var restrictionHrs=
2;var returnTime;var userTime=(new Date).toLocaleTimeString();var tmpd=new Date;var tmphr=tmpd.getHours();if(tmphr>12)tmphr=tmphr-12;var hr=tmphr;var min=tmpd.getMinutes();var offset=hr-(new Date).getHours();if(min>0)hr++;hr=hr+restrictionHrs-offset;if(hr<=8)returnTime="08:00:00";else if(hr>8&&hr<=23)returnTime=hr+":00:00";else if(hr>23)returnTime="23:00:00";return returnTime},getContactId:function(successCallback,errorCallback){var tpfUsage=HRB.session.getValue("tpfUsage");var tpfUsageObj=null;var contactId=
0;var payload="";if(tpfUsage!=null){tpfUsageObj=jQuery.parseJSON(tpfUsage);contactId=tpfUsageObj.contactId}else{HRB.tools.log("initialize tpfUsage with value "+JSON.stringify(HRB.session.tpfUsage));HRB.session.storeValue("tpfUsage",JSON.stringify(HRB.session.tpfUsage));tpfUsage=HRB.session.getValue("tpfUsage");tpfUsageObj=jQuery.parseJSON(tpfUsage)}if(contactId==0)$.ajax({"type":"GET","url":"/gateway-am/services/tpf/meta/appmeta","data":payload,"success":function(data,textStatus,jqXHR){contactId=
data.response.contactId;HRB.tools.log("ContactId : "+contactId);if(tpfUsageObj!=null){tpfUsageObj.contactId=contactId;tpfUsageObj.emeraldSeasonStartDate=data.response.emeraldSeasonStartDate.replace(/-/g,"/");tpfUsageObj.emeraldPreSeasonStartDate=data.response.emeraldPreSeasonStartDate.replace(/-/g,"/");tpfUsageObj.emeraldSeasonEndDate=data.response.emeraldSeasonEndDate.replace(/-/g,"/");tpfUsageObj.taxSeasonStartDate=data.response.taxSeasonStartDate.replace(/-/g,"/");tpfUsageObj.taxSeasonEndDate=
data.response.taxSeasonEndDate.replace(/-/g,"/");HRB.session.storeValue("tpfUsage",JSON.stringify(tpfUsageObj))}successCallback(tpfUsageObj)},"error":function(jqXHR,textStatus,e){errorCallback(jqXHR,textStatus,e)}});else successCallback(tpfUsageObj)},getTaxPros:function(officeId,contactId,successCallback,errorCallback){var taxProBasicRequest={};taxProBasicRequest.officeId=officeId;taxProBasicRequest.contactId=contactId;var payload=JSON.stringify(taxProBasicRequest);var employeeList=[];HRB.tools.log("Office Pod - "+
payload);$.ajax({headers:{"Accept":"application/json","Content-Type":"application/json"},"type":"POST","url":"/gateway-am/services/tpf/taxpro/basicinfo-bm","data":payload,"success":function(data,textStatus,jqXHR){if(data.response!=null&&data.response.taxProList){var taxProList=data.response.taxProList;for(var i=0;i<taxProList.length;i++)if(taxProList[i].seasonalityIndicator=="A"||taxProList[i].seasonalityIndicator=="D")employeeList.push(taxProList[i].employeeId)}successCallback(employeeList)},"error":function(jqXHR,
textStatus,e){errorCallback(jqXHR,textStatus,e)}})},getTaxProDetails:function(officeId,contactId,employeeList,successCallback,errorCallback){var taxProDetailsRequest={};taxProDetailsRequest.officeId=officeId;taxProDetailsRequest.contactId=contactId;taxProDetailsRequest.employeeList=employeeList;var payload=JSON.stringify(taxProDetailsRequest);var taxPro=[];HRB.tools.log("Office Pod - "+payload);$.ajax({headers:{"Accept":"application/json","Content-Type":"application/json"},"type":"POST","url":"/gateway-am/services/tpf/taxpro/details-officeid-empidlist",
"data":payload,"success":function(data,textStatus,jqXHR){HRB.tools.log("getTaxProDetails - "+data);if(data.response!=null&&data.response.taxProList&&data.response.taxProList.length>0)taxPro=data.response.taxProList[0];successCallback(taxPro)},"error":function(jqXHR,textStatus,e){errorCallback(jqXHR,textStatus,e)}})},getAppointments:function(officeId,tpfUsageObj,employeeList,successCallback,errorCallback){var appmntReqObj={};appmntReqObj.numberOfSlots=50;appmntReqObj.duration="";appmntReqObj.clientRating=
1;appmntReqObj.earliestAppointment=true;appmntReqObj.multiState=false;appmntReqObj.appointmentServiceType="OFFICE";appmntReqObj.spanishIndicator=false;appmntReqObj.slotFilter="TP";appmntReqObj.officeList=[officeId];appmntReqObj.employeeList=[employeeList];appmntReqObj.appointmentStartDateTime=HRB.locator.formatSysDate()+"T08:00:00";appmntReqObj.appointmentEndDateTime=HRB.locator.formatSysDate()+"T22:00:00";appmntReqObj.contactId=tpfUsageObj.contactId;appmntReqObj.appointmentStartDateTimeUser=HRB.locator.formatSysDate()+
"T"+HRB.locator.getUserLocaleTime();appmntReqObj.serviceType=1;appmntReqObj.catpFlowType="CATPNonBestMatch";appmntReqObj.employeeRole=1;var payload=JSON.stringify(appmntReqObj);HRB.tools.log("Office Pod - "+payload);$.ajax({headers:{"Accept":"application/json","Content-Type":"application/json"},"type":"POST","url":"/gateway-am/services/tpf/appointment/available-slots","data":payload,"success":function(data,textStatus,jqXHR){var officeAppointmentList=[];if(data!=null&&data.response!=null&&data.response.officeAppointmentList!=
null&&data.response.officeAppointmentList.length>0)officeAppointmentList=data.response.officeAppointmentList;successCallback(officeAppointmentList)},"error":function(jqXHR,textStatus,e){errorCallback(jqXHR,textStatus,e)}})}},analytics:{callRule:function(ruleName){HRB.tools.log('DTM: hrb.js: HRB.analytics.callRule: calling _satellite.track("'+ruleName+'")');try{_satellite.track(ruleName)}catch(e$19){HRB.tools.log("DTM: hrb.js: HRB.analytics.callRule: error! :"+e$19);return false}return true}},personalization:{processApptConfirmation:function(oid,
apptid,tpid,st,appdt,apptm){return true}},datatrack:{processPixels:function(data){if(typeof data!="undefined"&&typeof data.px!="undefined"){var tokens=data.px;HRB.tools.log("processPixels : "+tokens);var tokenArray=tokens.split(",");$.each(tokenArray,function(index,token){HRB.tools.log("px : "+token);processPixelTracking(token)})}else HRB.tools.log("Info Only: dataTrack did not specify any pixels to fire.")}},pixel:{processPixel:function(token){processPixelTracking.apply(this,arguments)}},libraries:{isHrObj:function(){return typeof HR===
"undefined"?false:true},isCategorizr:function(){return typeof categorizr==="undefined"?false:true}},omniture:{doAnalytics:function(obj,classValue){if(typeof omni_pagename=="undefined")omni_pagename="wasundefined";for(key in obj)HRBData.digital_data[key]=obj[key];HRBData.digital_data.page_message="";var ruleNameToCall="";obj.pid=typeof obj.pid!="undefined"?obj.pid:"-1";var ruleNameToCall=typeof obj.rule!="undefined"?obj.rule:"n/a";var trackElementLinkName=typeof obj.linkname!="undefined"?obj.linkname:
"n/a";var trackElementLocation=typeof obj.loc!="undefined"?obj.loc:"n/a";var trackElementName=typeof obj.nm!="undefined"?obj.nm:"n/a";HRBData.digital_data.product_name="n/a";HRBData.digital_data.pid=obj.pid;HRBData.digital_data.click_linkname=trackElementLinkName;HRBData.digital_data.loc=trackElementLocation;HRBData.digital_data.nm=trackElementName;if(ruleNameToCall=="rc")ruleNameToCall="regular_click";if(ruleNameToCall=="n/a")if(typeof obj.trackevents=="undefined"&&typeof obj.trackvars=="undefined")ruleNameToCall=
"regular_click";else{HRB.tools.log("DTM:hrb.js:trackevents and/or trackvars found.  link must be updated with DTM sytnax.");try{HRB.tools.log("DTM:hrb.js:trackevents value was '"+JSON.stringify(obj.trackevents)+"'")}catch(e$20){}try{HRB.tools.log("DTM:hrb.js:trackvars value was '"+JSON.stringify(obj.trackvars)+"'")}catch(e$21){}}if(typeof obj.trackvars=="undefined"||obj.trackvars=="")obj.trackvars={};if(obj.type=="sn")if(ruleNameToCall=="n/a")ruleNameToCall="online_product_start_now";if(obj.type==
"dn")if(ruleNameToCall=="n/a")ruleNameToCall="software_download";if(obj.type=="sn"||obj.type=="dn"){var pl;try{pl=HRB.products.getProducts().getProductPlatform(obj.pid)}catch(e$22){HRB.tools.log("doAnalytics:Exception Handler:obj.pid is:"+obj.pid)}var pl_val=pl=="O"?"tco":pl=="R"?"off":pl=="S"?"tcs":"nfd";HRBData.digital_data.product_channel=pl_val;obj.trackevents=typeof obj.trackevents!="undefined"?obj.trackevents+",event14":"event14";HRBData.digital_data.events=obj.trackevents!=""?obj.trackevents:
null;if(obj.pid=="-1"){HRBData.digital_data.product_id="unknown product id";HRBData.digital_data.product_name="unknown product name";if(obj.type=="dn"){obj.trackvars.eVar10="software"+"-"+"unknown product id"+"-"+obj.nm+"-"+omni_pagename+"-"+trackElementLinkName;obj.trackvars.prop5="D=v10";HRBData.digital_data.product_channel="tcs"}else{obj.trackvars.eVar10="online"+"-"+"unknown product id"+"-"+obj.nm+"-"+omni_pagename+"-"+trackElementLinkName;obj.trackvars.prop5="D=v10";HRBData.digital_data.product_channel=
"tco"}}else{obj.trackvars.eVar10=pl_val+"-"+obj.pid+"-"+HRB.products.getProducts().getProductName(obj.pid)+"-"+omni_pagename+"-"+trackElementLinkName;obj.trackvars.prop5="D=v10";HRBData.digital_data.product_name=HRB.products.getProducts().getProductName(obj.pid)}}obj.trackvars.eVar48=omni_pagename+"/nav/"+trackElementLocation+"/"+trackElementName;if(HRBData.digital_data.dtmEnabled)if(ruleNameToCall!="n/a"){HRB.analytics.callRule(ruleNameToCall);HRB.tools.log("DTM:hrb.js:HRB.analytics.callRule('"+
ruleNameToCall+"') complete. Continued...")}else{HRB.tools.log("DTM:hrb.js:since ruleNameToCall is "+ruleNameToCall+" calling scode in legacy format.");try{this.recordEvent(this,obj,classValue)}catch(e$23){HRB.tools.log("DTM: hrb.js: 1: failed calling scode in legacy format. Error:"+e$23)}}else try{this.recordEvent(this,obj,classValue)}catch(e$24){HRB.tools.log("DTM: hrb.js: 2: failed calling legacy omniture. Error:"+e$24)}},recordEvent:function(obj,dataObj,classValue){var data=this.buildOmnitureObject($.toJSON(dataObj));
HRB.tools.log("DTM: hrb.js: recordEvent():calling scode in legacy format. Your link "+classValue+" was not DTM compliant OR adobedtm.js not in page.");this.webAnalytics(obj,data,classValue)},buildOmnitureObject:function(data){var bUseReferenceVars=data.indexOf("@ref:")!=-1?true:false;dataObj=jQuery.parseJSON(data);var obj={"trackvars":{},"trackevents":"","linktype":""};var trackVars=typeof dataObj.trackvars!="undefined"?dataObj.trackvars:null;var trackEvents=typeof dataObj.trackevents!="undefined"?
dataObj.trackevents:null;var trackLinkType=typeof dataObj.linktype!="undefined"?dataObj.linktype:"o";obj.trackvars=trackVars;obj.trackevents=trackEvents;obj.linktype=trackLinkType;var attrName;var keyValue;if(bUseReferenceVars)for(key in obj.trackvars){HRB.tools.log("key: "+key+" has value "+obj.trackvars[key]);if(obj.trackvars.hasOwnProperty(key))if(obj.trackvars[key].indexOf("@ref:")==0){keyValue=obj.trackvars[key];attrName=keyValue.substr(5);HRB.tools.log("for key '"+key+"', replace keyValue '"+
keyValue+"' with '"+HRB.dataLayer[attrName]);obj.trackvars[key]=HRB.dataLayer[attrName];HRB.tools.log("obj.trackvars["+key+"] now has value '"+obj.trackvars[key]+"'")}}return obj},webAnalytics:function(callerHref,omniObj,classValue){var s=s_gi(s_hrb.account);s.prop19=s.pageName==""?"":s.pageName;s.prop20=s.prop19;s.eVar100="Legacy call format. Update "+classValue+" to use call rule";s.linkTrackVars="eVar100,";var tvar=omniObj.trackvars;for(key in tvar)if(tvar.hasOwnProperty(key)){s[key]=tvar[key];
if(typeof s.linkTrackVars=="undefined"||typeof s.linkTrackVars!="undefined"&&s.linkTrackVars.toLowerCase()=="none")s.linkTrackVars="";s.linkTrackVars+=key+","}if(omniObj.trackevents){s.events=omniObj.trackevents;s.linkTrackEvents=omniObj.trackevents;s.linkTrackVars+="events"}s.linkType=omniObj.linktype;if(typeof g_exceptionToRecord!="undefined"&&g_exceptionToRecord!=""){HRB.tools.log("DTM: hrb.js: OMNITURE CALL: LEGACY ROUTE! - Exception Call");s.tl(callerHref,s.linkType,g_exceptionToRecord);g_exceptionToRecord=
""}else{HRB.tools.log("DTM: hrb.js: OMNITURE CALL: LEGACY ROUTE!");s.tl(true,s.linkType,s.prop19)}for(key in tvar)if(tvar.hasOwnProperty(key))s[key]="";s.linkTrackVars="None";s.linkTrackEvents="None";s.events=""},recordVirtualPage:function(o){processPixelTracking("omnivirtual","channel="+o.channel+"&subchannel="+o.subchannel+"&page_id="+o.pageid+"&"+o.evars+"&"+o.props+"&events="+o.events+"&products="+o.products+"&rnd="+Math.random())}},partner:{offermatica_ptnr_id:null,fromSearchEngine:function(){return HRB.page.getPageProperties().getRefPartner()},
fromURL:function(){return HRB.tools.getQueryUrl("otpPartnerId")},fromCookie:function(){var m_cookie=HRB.session.getValue("main_cookie");return HRB.tools.getQueryParam("otpPartnerId",m_cookie)},setOffermatica:function(offermatica_ptnr_id){HRB.tools.log("pricing: setting offermatica_ptnr_id to "+offermatica_ptnr_id);this.offermatica_ptnr_id=offermatica_ptnr_id},fromOffermatica:function(){return this.offermatica_ptnr_id},determinePartnerIdOLD:function(){var partner_id=0;HRB.partner.setOffermatica(sessionStorage["adobePartnerId"]);
var o_partner_id=HRB.partner.fromOffermatica();var u_partner_id=HRB.partner.fromURL();var c_partner_id=HRB.partner.fromCookie();var s_partner_id=HRB.partner.fromSearchEngine();partner_id=o_partner_id!=null?o_partner_id:u_partner_id!=null?u_partner_id:c_partner_id!=null?c_partner_id:s_partner_id!=null?s_partner_id:0;HRB.tools.log("pricing: adobe cookie:  o_partner_id:"+o_partner_id);HRB.tools.log("pricing: URL:\t       u_partner_id:"+u_partner_id);HRB.tools.log("pricing: main cookie:   c_partner_id:"+
c_partner_id);HRB.tools.log("pricing: search engine: s_partner_id:"+s_partner_id);HRB.tools.log("pricing: The partner id we'll use is: "+partner_id);return partner_id},determinePartnerId:function(){var partner_id=0;HRB.partner.setOffermatica(null);var o_partner_id=HRB.partner.fromOffermatica();var u_partner_id=HRB.partner.fromURL();var c_partner_id=HRB.partner.fromCookie();var s_partner_id=HRB.partner.fromSearchEngine();if(u_partner_id!=null&&u_partner_id!=o_partner_id||c_partner_id!=null&&c_partner_id!=
o_partner_id){HRB.tools.log("pricing: Since cookie ["+c_partner_id+"] or url ["+u_partner_id+"] != adobe ["+o_partner_id+"] kill adobe session obj");removeAdobePriceTestObject();o_partner_id=null;HRB.partner.setOffermatica(null)}partner_id=o_partner_id!=null?o_partner_id:u_partner_id!=null?u_partner_id:c_partner_id!=null?c_partner_id:s_partner_id!=null?s_partner_id:0;HRB.tools.log("pricing: adobe cookie:  o_partner_id:"+o_partner_id);HRB.tools.log("pricing: URL:\t       u_partner_id:"+u_partner_id);
HRB.tools.log("pricing: main cookie:   c_partner_id:"+c_partner_id);HRB.tools.log("pricing: search engine: s_partner_id:"+s_partner_id);HRB.tools.log("pricing: The partner id we'll use is: "+partner_id);return partner_id}},products:{default_opts:{url:"/hrb/pricingservice/"},getProducts:function(){return _priceObj},isLateSeasonPartner:function(pid){try{if(HRBData.config.lspPartners.indexOf(pid+"")!=-1)return true;else return false}catch(e$25){return false}},displayPricing:function(){HRB.tools.log("displayPricing: ****************** BEGIN ****************");
$('[class*="product-price"]').each(function(ind){if($(this).hasClass("product-price")){try{var data=jQuery.parseJSON($.toJSON($(this).data("product")))}catch(e$26){HRB.tools.log("displayPricing: 1:"+e$26)}var pid=data.pid;if(typeof pid!="undefined"&&pid!=null){try{var attrItemProp=$(this).attr("itemprop");var attrContent=$(this).attr("content");if(typeof attrItemProp!==typeof undefined&&attrItemProp!==false&&(typeof attrContent!==typeof undefined&&attrContent!==false)){var contentPrice=parseFloat(_priceObj.getProductInfo(pid).ppr);
if(contentPrice<0)contentPrice="0.00";$(this).attr("content",contentPrice)}}catch(e$27){HRB.tools.log("displayPricing: error setting price schema info:"+e$27)}var originalPid=pid;var bShowTprPrice=false;if(HRBData.config.bEnableTprPriceUpdate)if(pid=="32"|pid=="47"|pid=="201"|pid=="204"&&HRB.ui.getTPRbyProduct(pid).toUpperCase()=="Y"){switch(pid){case "201":if(data.skipTpr);else{pid="Free201PlusTpr45";bShowTprPrice=true}break;case "204":if(data.skipTpr);else{pid="Deluxe204PlusTpr46";bShowTprPrice=
true}break;case "32":if(data.skipTpr);else{pid="Prem32PlusTpr44";bShowTprPrice=true}break;case "47":if(data.skipTpr);else{pid="SelfEmp47PlusTpr49";bShowTprPrice=true}break;default:}HRB.tools.log("TPR: original pid:"+originalPid+", using this pid for price "+pid)}var prdinfo=_priceObj.getProductInfo(pid);if(prdinfo=="undefined"||prdinfo==null)HRB.tools.log("displayPricing: can't find product data for product id '"+pid+"'");else{if(prdinfo.pl=="S"){if(_priceObj.getObj().status.tcs==0)$("[data-product*="+
pid+"]").css("color","#7D007D")}else if(_priceObj.getObj().status.tco==0)$("[data-product*="+pid+"]").css("color","#7D007D");var _ppr=Number(parseFloat(prdinfo.ppr).toFixed(2));var _bpr=Number(parseFloat(prdinfo.bpr).toFixed(2));var prHTML="";if(_ppr<0)prHTML="$0"+"&nbsp;";else if(_ppr==0)prHTML="$"+prdinfo.bpr;else if(_ppr<_bpr){var lineBreak=data.lb;var formatHtml="&nbsp;";if(lineBreak)formatHtml="<br>";if($(this).hasClass("strike-through-last"))prHTML="$"+prdinfo.ppr+formatHtml+"<del>$"+prdinfo.bpr+
"</del>";else prHTML="<del>$"+prdinfo.bpr+"</del>"+formatHtml+"$"+prdinfo.ppr+"&nbsp;"}else prHTML="$"+prdinfo.bpr;this.innerHTML=prHTML;HRB.tools.log("displayPricing: set "+pid+" "+prdinfo.on+' price as "'+prHTML+'"')}}}});try{}catch(e$28){HRB.tools.log("error setting Tax Pro Review check boxes")}try{HRB.tools.log("displayPricing: notifying page that displayPricing is complete");displayPricingComplete()}catch(e$29){HRB.tools.log("displayPricing: page did not implement displayPricingComplete()")}try{HrbTunneled.processPartnerDrawer()}catch(e$30){HRB.tools.log("displayPricing: error calling HRB.tunneled.processPartnerDrawer():"+
e$30+". Is partner-drawer.html on the page?")}var _tmp_ppobj=_priceObj.getObj();for(i=0;i<_tmp_ppobj.prodList.length;i++){$(".bvRatings .bvProdRating .prodRating"+_tmp_ppobj.prodList[i].pid).css("width",23*_tmp_ppobj.prodList[i].rt+"px");$(".bvRatings .bvProdReviews"+_tmp_ppobj.prodList[i].pid).html(_tmp_ppobj.prodList[i].rv+" customer reviews");$(".bvRatings").css({"visibility":"visible","display":"block"})}HRB.tools.log("displayPricing: ****************** END ****************")},processPricing:function(){otp_partner_id=
g_partner_id;HRB.tools.log("otp_partner_id: "+otp_partner_id);if(HRB.session.getValue("bsc_sessiontrack")==null)HRB.session.storeValue("bsc_sessiontrack",HRB.tools.getBscId(),"","/",".hrblock.com","");var opts=HRB.products.default_opts;_priceObj=new PartnerProduct;var cmry_id=HRB.tools.getQueryUrl("CamryID");if(HRBData.config.bAddCamryIdToZero&&(otp_partner_id==0||otp_partner_id==2631))cmry_id=HRBData.config.CamryIdForZero;if(HRBData.config.bEnablePidCamryOverride){var overrideCid=HRBData.config.pidCamryOverride[otp_partner_id];
if(typeof overrideCid!="undefined")cmry_id=overrideCid}var wscCookie=HRB.session.getValue("wsc");HRB.tools.log("wsc cookie value: "+wscCookie);if(wscCookie!=null){HRB.tools.log("inside wsc condition");var decompress=HRB.tools._decompress(wscCookie);HRB.tools.log("Decompressed wscCookie: "+decompress);try{_priceObj.setObj(jQuery.parseJSON(decompress)._partner_product);if(otp_partner_id==_priceObj.getObj().partner.otpPartnerID&&!HRB.bForcePartnerChange){HRB.products.displayPricing();return}else _priceObj.setObj(jQuery.parseJSON(def_pricing))}catch(e$31){HRB.tools.log("processPricing : "+
e$31)}}else try{_priceObj.setObj(jQuery.parseJSON(def_pricing))}catch(e$32){}var bReplacePartnerIdInPriceResponseWithES=false;try{var campaignIdToEvaluate=HRB.tools.getQueryUrl("campaignid");if(campaignIdToEvaluate!=null){HRB.tools.log("ES: campaignIdToEvaluate:"+campaignIdToEvaluate);var pidIndex=campaignIdToEvaluate.lastIndexOf("_");HRB.tools.log("ES: pidIndex:"+pidIndex);var seqNbrFromCampaignId=campaignIdToEvaluate.substr(pidIndex+1);HRB.tools.log("ES: partner id from campaignid parameter is:"+
seqNbrFromCampaignId);if(HRBData.config.estest.corestream&&seqNbrFromCampaignId=="7443"){otp_partner_id=9538;bReplacePartnerIdInPriceResponseWithES=true}else if(HRBData.config.estest.beneplace&&seqNbrFromCampaignId=="4359"){otp_partner_id=9539;bReplacePartnerIdInPriceResponseWithES=true}else if(HRBData.config.estest.perkspot&&seqNbrFromCampaignId=="4209"){otp_partner_id=9540;bReplacePartnerIdInPriceResponseWithES=true}if(HRB.tools.checkEnv()=="DEV")if(seqNbrFromCampaignId=="7801"){otp_partner_id=
9540;bReplacePartnerIdInPriceResponseWithES=true}}}catch(e$33){HRB.tools.log("ES: error is "+e$33)}HRB.tools.log("processPricing","calling ajax to get pricing for partner id: "+otp_partner_id);HRB.tools.log("FFA: processPricing","calling ajax to get pricing for partner id: "+otp_partner_id);var postData='data={"pid":'+otp_partner_id+',"ven":"cm","yr":'+HRBData.config.yearForSoftware+',"prodList":[{"id":"34","sk":"0"},{"id":"36","sk":"WDPA"},{"id":"38","sk":"WDPH"},{"id":"206","sk":"WDDF"},{"id":"207","sk":"WDDA"},{"id":"199","sk":"WDBF"},{"id":"39","sk":""}],"offerid":'+
cmry_id+',"pgm":null}';var bAdjustPartnerBase=false;var basePrice="";var host=location.hostname;if(host.indexOf("hrbcomdev-csc")!=-1||host.indexOf("-az.hrblock.")!=-1)opts.url="/hrb/pricingservice/";$.ajax({"type":"GET","url":opts.url,"dataType":"json","data":postData,"timeout":5E3,beforeSend:function(request){request.setRequestHeader("TRACKINGIDTOKEN","5fe2d3e1ba5bd581b22348564a794978255664a0")},"success":function(data){if(bReplacePartnerIdInPriceResponseWithES)data.partnerVO.otpPartnerID="9423";
var tmppartner=_priceObj.getPartnerInfo();var jsonProductObj={};jsonProductObj={"basePrice":"","bvrating":"","bvreview":"","learnMore":"","partnerPrice":"","platform":"O","productId":"Free201PlusTpr45","productName":"","serviceName":"","skuText":"","startNow":""};data["productVOList"].push(jsonProductObj);jsonProductObj={"basePrice":"","bvrating":"","bvreview":"","learnMore":"","partnerPrice":"","platform":"O","productId":"Deluxe204PlusTpr46","productName":"","serviceName":"","skuText":"","startNow":""};
data["productVOList"].push(jsonProductObj);jsonProductObj={"basePrice":"","bvrating":"","bvreview":"","learnMore":"","partnerPrice":"","platform":"O","productId":"Prem32PlusTpr44","productName":"","serviceName":"","skuText":"","startNow":""};data["productVOList"].push(jsonProductObj);jsonProductObj={"basePrice":"","bvrating":"","bvreview":"","learnMore":"","partnerPrice":"","platform":"O","productId":"SelfEmp47PlusTpr49","productName":"","serviceName":"","skuText":"","startNow":""};data["productVOList"].push(jsonProductObj);
tmppartner.cid=data.partnerVO.cid;tmppartner.partnerName=data.partnerVO.partnerName;tmppartner.partnerType=data.partnerVO.partnerType;tmppartner.otpPartnerID=data.partnerVO.otpPartnerID;tmppartner.partnerTunnel=data.partnerVO.partnerTunnelInd;tmppartner.partnerID=data.partnerVO.partnerID;tmppartner.partnerActive=data.partnerVO.partnerActiveStatusInd;tmppartner.welcome=data.partnerVO.partnerWelcomeText;if(HRBData.config.bEnableBasePriceChange&&HRB.products.isLateSeasonPartner(tmppartner.otpPartnerID))bAdjustPartnerBase=
true;var FreePP=0;var FreeBP=0;var FreeTPR=0;var DeluxePP=0;var DeluxeBP=0;var DeluxeTPR=0;var PremiumPP=0;var PremiumBP=0;var PremiumTPR=0;var SelfEmpPP=0;var SelfEmpBP=0;var SelfEmpTPR=0;for(var j=0;j<data.productVOList.length;j++){var tmpObj=_priceObj.getProductInfo(data.productVOList[j].productId);if(tmpObj!=null){basePrice=data.productVOList[j].basePrice;if(bAdjustPartnerBase)try{if(typeof HRBData.config.lsp[tmpObj.pid]!="undefined")basePrice=HRBData.config.lsp[tmpObj.pid]}catch(e$34){HRB.tools.log("hrb.js:no special price for product #"+
tmpObj.pid+" found.  Using "+basePrice)}tmpObj.bpr=basePrice;tmpObj.ppr=data.productVOList[j].partnerPrice;tmpObj.sn=data.productVOList[j].startNow;if(typeof tmpObj.sn!="undefined"&&typeof tmpObj.sn!="undefined"!=null&&tmpObj.sn.indexOf("/loginRedirect.html?")!=-1)tmpObj.sn=tmpObj.sn.replace("/loginRedirect.html?","");tmpObj.rt=data.productVOList[j].bvrating;tmpObj.rv=data.productVOList[j].bvreview;var id=data.productVOList[j].productId;switch(id){case "201":FreePP=data.productVOList[j].partnerPrice;
FreeBP=basePrice;break;case "45":FreeTPR=data.productVOList[j].partnerPrice;break;case "204":DeluxePP=data.productVOList[j].partnerPrice;DeluxeBP=basePrice;break;case "46":DeluxeTPR=data.productVOList[j].partnerPrice;break;case "32":PremiumPP=data.productVOList[j].partnerPrice;PremiumBP=basePrice;break;case "44":PremiumTPR=data.productVOList[j].partnerPrice;break;case "47":SelfEmpPP=data.productVOList[j].partnerPrice;SelfEmpBP=basePrice;case "49":SelfEmpTPR=data.productVOList[j].partnerPrice;break;
default:}}}_priceObj.getObj().status.tco=0;_priceObj.getObj().status.tcs=0;for(i=0;i<data.statusVOs.length;i++)if(data.statusVOs[i].service.toLowerCase()=="online_pricing"){if(data.statusVOs[i].status.toLowerCase()=="success")_priceObj.getObj().status.tco=1}else if(data.statusVOs[i].service.toLowerCase()=="software-pricing"){if(data.statusVOs[i].status.toLowerCase()=="success")_priceObj.getObj().status.tcs=1}else console.error("unable to determine pricing service call status.  service:"+data.statusVOs[i].service+
", status: "+data.statusVOs[i].status+", errorCode: "+data.statusVOs[i].errorCode+",errorMessage: "+data.statusVOs[i].errorMessage);FreePP=FreePP=="-1"?0:FreePP;DeluxePP=DeluxePP=="-1"?0:DeluxePP;PremiumPP=PremiumPP=="-1"?0:PremiumPP;SelfEmpPP=SelfEmpPP=="-1"?0:SelfEmpPP;for(var j=0;j<data.productVOList.length;j++){var tmpObj=_priceObj.getProductInfo(data.productVOList[j].productId);if(tmpObj!=null){if(tmpObj.pid=="Free201PlusTpr45"){tmpObj.ppr=(parseFloat(FreePP)+parseFloat(FreeTPR)).toFixed(2);
tmpObj.bpr=(parseFloat(FreeBP)+parseFloat(FreeTPR)).toFixed(2);HRB.tools.log("TPR: set pid "+tmpObj.pid+" bpr:"+tmpObj.bpr+", and ppr:"+tmpObj.ppr)}if(tmpObj.pid=="Deluxe204PlusTpr46"){tmpObj.ppr=(parseFloat(DeluxePP)+parseFloat(DeluxeTPR)).toFixed(2);tmpObj.bpr=(parseFloat(DeluxeBP)+parseFloat(DeluxeTPR)).toFixed(2);HRB.tools.log("TPR: Deluxe PPR:"+DeluxePP+". Deluxe BPR:"+DeluxeBP);HRB.tools.log("TPR: set pid "+tmpObj.pid+" bpr:"+tmpObj.bpr+", and ppr:"+tmpObj.ppr)}if(tmpObj.pid=="Prem32PlusTpr44"){tmpObj.ppr=
(parseFloat(PremiumPP)+parseFloat(PremiumTPR)).toFixed(2);tmpObj.bpr=(parseFloat(PremiumBP)+parseFloat(PremiumTPR)).toFixed(2);HRB.tools.log("TPR: set pid "+tmpObj.pid+" bpr:"+tmpObj.bpr+", and ppr:"+tmpObj.ppr)}if(tmpObj.pid=="SelfEmp47PlusTpr49"){tmpObj.ppr=(parseFloat(SelfEmpPP)+parseFloat(SelfEmpTPR)).toFixed(2);tmpObj.bpr=(parseFloat(SelfEmpBP)+parseFloat(SelfEmpTPR)).toFixed(2);HRB.tools.log("TPR: set pid "+tmpObj.pid+" bpr:"+tmpObj.bpr+", and ppr:"+tmpObj.ppr)}}}var drawerObj={"closed":"",
"hasLogo":false,"logoPath":"","hasCoupon":false,"couponPath":"","partnerName":""};HRB.session.storeValue("drawer",null);HRB.tools.log("New Object"+$.toJSON(_priceObj));var compress=HRB.tools._compress($.toJSON(_priceObj));HRB.tools.log("compress object: "+compress);HRB.tools.log("FFA: compress object: "+compress);HRB.session.storeValue("wsc",compress);HRB.tools.log("processPricing: writing digitalriver with "+cmry_id);HRB.session.storeValue("digitalriver",cmry_id);useThisCID=data.partnerVO.cid;if(useThisCID==
"no__thanks"||useThisCID=="0"||useThisCID=="na")useThisCID="";if(data.partnerVO.otpPartnerID!=g_partner_id){HRB.tools.log("Since "+data.partnerVO.otpPartnerID+" != "+g_partner_id+" lets overwrite main_cookie");g_b_ws_partner_id_different=true;g_partner_cid=useThisCID;g_partner_id=data.partnerVO.otpPartnerID;HRB.session.storeValue("main_cookie","&otpPartnerId="+g_partner_id+"&PartnerId="+g_partner_id)}processDigitalRiverCookie();HRB.products.displayPricing()},error:function(request,status,error){HRB.tools.log("ajax Error:"+
request.responseText);HRB.products.displayPricing()}})},displayTpgPricing:function(currTaxYear){console.log("TPG: displayTpgPricing: ****************** BEGIN ****************");var partnersProduct=[{"otppartnerid":"9560","campaignid":"pw_mcm_9560_0100","id":"Simple"},{"otppartnerid":"9560","campaignid":"pw_mcm_9560_0105","id":"StudentRetired"},{"otppartnerid":"9560","campaignid":"pw_mcm_9560_0103","id":"FamilyInvestor"},{"otppartnerid":"9560","campaignid":"pw_mcm_9560_0104","id":"BusinessOwner"},
{"otppartnerid":"9559","campaignid":"pd_mcm_9559_0100","id":"WalmartRetail"},{"otppartnerid":"9562","campaignid":"pw_mcm_9562_0100","id":"Wave"},{"otppartnerid":"9561","campaignid":"pw_mcm_9561_0100","id":"Promo"}];function tpgPartnerProductNotFound(){try{if(typeof tpgPartnerProductNotFoundFallback!="undefined"){console.error("TPG: displayTpgPricing: tpgPartnerProductNotFound calling tpgPartnerProductNotFoundFallback");tpgPartnerProductNotFoundFallback()}}catch(e$35){}}var tpgPartner=false;var partnerUrlSegment=
"/tpg/";var campaignid=HRB.tools.getQueryUrl("campaignid");var partnerId=g_partner_id;var partnerProduct=null;if(campaignid&&window.location.href.indexOf(partnerUrlSegment)>-1){tpgPartner=true;partnerProduct=getPartnerProduct(campaignid)}var tpgGroup=HRB.ui.getTpgGroup();var priceType=tpgGroup.priceGroup.toLowerCase();var tpgPrices=JSON.parse(HRB.session.getValue("tpgPrices"));var browserRequestId=tpgPrices.browserRequestId;var skuArray=tpgPrices.skuArray;if(tpgPartner){priceType="a";if(partnerProduct!=
null){$("#tpg-partner-get-started").removeAttr("disabled");console.log("TPG: displayTpgPricing: Partner Product : "+partnerProduct.id)}else{console.error("TPG: displayTpgPricing: Partner Product Not Found : "+partnerProduct.id);tpgPartnerProductNotFound()}$(".partner-btn-get-started").off("click").on("click",function(){if(partnerProduct!=null)saveProduct(partnerProduct.id)});console.log("TPG: displayTpgPricing: Partner Id : "+partnerId),console.log("TPG: displayTpgPricing: Campaign Id : "+campaignid)}else{var objState=
getProduct("State");for(var i=0;i<skuArray.length;i++){var price=priceType+"price";var product=skuArray[i].id.toLowerCase();if($('[data-tpg-product="'+product+'_federal"]').length>0){var fedPrice=skuArray[i].skuProperties[price];if(fedPrice.substr(fedPrice.indexOf("."),fedPrice.length)==".00")fedPrice=fedPrice.substr(0,fedPrice.indexOf("."));$('[data-tpg-product="'+product+'_federal"]').text("$"+fedPrice)}if($('[data-tpg-product="'+product+'_state"]').length>0){var statePrice=objState.skuProperties[price];
if(statePrice.substr(statePrice.indexOf("."),statePrice.length)==".00")statePrice=statePrice.substr(0,statePrice.indexOf("."));$('[data-tpg-product="'+product+'_state"]').text("$"+statePrice)}$("a.btn-get-started , button.btn-get-started").off("click").on("click",function(){var id=$(this).data("tpg-product");saveProduct(id)})}}function getProduct(id){for(var i=0;i<skuArray.length;i++)if(skuArray[i].id.toLowerCase()==id.toLowerCase())return skuArray[i];return{}}function getPartnerProduct(campaignid){for(var i=
0;i<partnersProduct.length;i++)if(partnersProduct[i].campaignid==campaignid)return partnersProduct[i];return null}function getPriceRequest(objFederal){var objState=getProduct("State");var requestObj={"priceGroup":priceType.toUpperCase(),"productName":objFederal.id,"priceFederal":objFederal.skuProperties[priceType+"price"],"pricePerState":objState.skuProperties[priceType+"price"],"partnerId":partnerId,"certLevel":objFederal.skuProperties.level,"browserRequestId":browserRequestId};return requestObj}
function trackTPGOLD(id){try{console.log("TPG_getstarted_CTA : "+id);HRBData.digital_data.loc="b";HRBData.digital_data.nm="TPG getstarted CTA click";HRBData.digital_data.id=id;HRB.analytics.callRule("TPG_getstarted_CTA");HRB.tools.log("DTM: Call rule TPG_getstarted_CTA")}catch(e$36){console.log('_satellite.track("TPG_getstarted_CTA") failed : '+e$36)}}function trackTPG(id){try{HRB.tools.log("DTM: Call rule TPG_getstarted_CTA");HRB.tools.log("TPG: Call rule TPG_getstarted_CTA");HRB.analytics.callRule("TPG_getstarted_CTA");
HRBData.digital_data.nm=id+"-start-now";HRBData.digital_data.loc="b";HRB.analytics.callRule("regular_click");HRB.tools.log("DTM: Call rule regular_click for TPG product '"+id+"' called");HRB.tools.log("TPG: Call rule regular_click for TPG product '"+id+"' called")}catch(e$37){console.log('_satellite.track("TPG_getstarted_CTA") failed : '+e$37)}}function saveProduct(id){trackTPG(id);function tpgSaveProductFailure(){try{if(typeof tpgSaveProductFailureFallback!="undefined"){console.error("TPG: saveProduct: tpgSaveProductFailure calling tpgSaveProductFailureFallback");
tpgSaveProductFailureFallback()}}catch(e$38){}}var objFederal=getProduct(id);var priceRequest=getPriceRequest(objFederal);var fcsp=HRB.tools.getQueryUrl("fcsp");if(fcsp&&fcsp.length>0)priceRequest.forceCondition=fcsp;var bHasInvocaCookie=HRB.tools.getCookie("invoca_session")==null?false:true;var bHasSmsessionCookie=HRB.tools.getCookie("SMSESSION")==null?false:true;var cookieSize=0;try{cookieSize=encodeURIComponent(""+document.cookie).length}catch(e$39){var cookieSize=-1}var cookieObj={};try{var cookieArr=
document.cookie.split(";");for(var i=0;i<cookieArr.length;i++){var cookieSeg=cookieArr[i].trim();var firstEq=cookieSeg.indexOf("=");var name=cookieSeg.substr(0,firstEq);var value=cookieSeg.substr(firstEq+1).length;cookieObj[name]=value}}catch(e$40){}var payloadJson=JSON.stringify(priceRequest);var callType="SaveProduct";var resultUrl="";$.ajax({url:"/hrb-service/taxprogo/saveProduct",dataType:"json",type:"POST",data:payloadJson,contentType:"application/json",beforeSend:function(xhr){},success:function(data,
status,jqXHR){try{var telemetryInitializer=function(envelope){envelope.data.appId="TPG"};appInsights.addTelemetryInitializer(telemetryInitializer);var bRecordSuccesses=true;var bServletSuccess=null;var bCbsSuccess=null;var bTcxSuccess=null;var trackEventObj={};var aiProperties={};var aiMeasurements={};console.log("TPG: saveProduct: success: "+callType+" response is: "+JSON.stringify(data));aiProperties.payload=JSON.parse(this.data);aiProperties.httpResponse=jqXHR.status;aiProperties.callType=callType;
aiProperties.browserRequestId=data.response!=null?data.response.browserRequestId:-1;aiProperties.eachServiceStatus=data.response!=null?data.response.eachServiceStatus:{"cbsStatus":"","cbsErrorCode":"","cbsMsg":null,"cbsEt":"","tcxStatus":"","tcxErrorCode":"","tcxMsg":null,"tcxEt":""};aiProperties.appStatus=data.status;aiProperties.servletResponded="yes";aiProperties.hasInvocaCookie=bHasInvocaCookie;aiProperties.hasSmsessionCookie=bHasSmsessionCookie;aiProperties.cookieSize=cookieSize;aiProperties.cookies=
cookieObj;aiProperties.pqid=data.response!=null?data.response.priceQuoteId:-1;aiProperties.guid=data.response!=null?data.response.tcxGuid:-1;aiMeasurements.totalElapsedTime=data.status.totalEt;bServletSuccess=data.status.status.toUpperCase()=="SUCCESS"?true:false;if(data.response!=null){bCbsSuccess=data.response.eachServiceStatus.cbsStatus.toUpperCase()=="SUCCESS"?true:false;bTcxSuccess=data.response.eachServiceStatus.tcxStatus.toUpperCase()=="SUCCESS"?true:false}aiProperties.servletSuccess=bServletSuccess;
aiProperties.cbsSuccess=bCbsSuccess;aiProperties.tcxSuccess=bTcxSuccess;trackEventObj.name=aiProperties.callType;trackEventObj.properties=aiProperties;trackEventObj.measurements=aiMeasurements;if(bServletSuccess&&bRecordSuccesses){console.log("TPG: saveProduct: success: calling SUCCESS trackEvent with "+JSON.stringify(trackEventObj));appInsights.trackEvent(trackEventObj)}else if(!bServletSuccess){console.log("TPG: saveProduct: success: calling FAILURE trackEvent with "+JSON.stringify(trackEventObj));
appInsights.trackEvent(trackEventObj)}}catch(e$41){console.error("TPG: saveProduct: success: error: "+e$41)}if(typeof data!==undefined)if(data.response!=null&&data.status.status.toLowerCase()==="success"){resultUrl=createGUAurl(data.response.tcxGuid);console.log("TPG: saveProduct: success: "+JSON.stringify(data.response));console.log("TPG: saveProduct: success: RESULT URL : "+resultUrl);delayThenGoToLogin(resultUrl)}else{console.error("TPG: saveProduct: success: response is null or unsuccessful status",
data);try{var telemetryInitializer=function(envelope){envelope.data.appId="TPG"};appInsights.addTelemetryInitializer(telemetryInitializer);var aiProperties={};var aiMeasurements={};aiProperties.payload=JSON.parse(this.data);aiProperties.httpResponse=jqXHR.status;aiProperties.callType=callType;aiProperties.servletSuccess=data.status.status.toUpperCase()=="SUCCESS"?true:false;aiProperties.browserRequestId=browserRequestId;aiProperties.eachServiceStatus={};aiProperties.appStatus=data.status.status;aiProperties.appErrorCode=
data.status.errorCode;aiProperties.errorMsg=data.status.errorMsg;aiProperties.servletResponded="yes";aiProperties.hasInvocaCookie=bHasInvocaCookie;aiProperties.hasSmsessionCookie=bHasSmsessionCookie;aiProperties.cookieSize=cookieSize;aiProperties.cookies=cookieObj;aiMeasurements.totalElapsedTime=data.status.totalEt;var trackEventObj={};trackEventObj.name=aiProperties.callType;trackEventObj.properties=aiProperties;trackEventObj.measurements=aiMeasurements;console.log("TPG: saveProduct: success: data.response is null or bad app status. call trackEvent with "+
JSON.stringify(trackEventObj));appInsights.trackEvent(trackEventObj)}catch(e$42){console.error("TPG: saveProduct: success: error processing application insights: "+e$42)}HRB.products.showTPGErrorLogs(callType,data);tpgSaveProductFailure()}},complete:function(jqXHR,textStatus){console.log("TPG: saveProduct: complete: textStatus:"+textStatus)},error:function(jqXHR){try{var telemetryInitializer=function(envelope){envelope.data.appId="TPG"};appInsights.addTelemetryInitializer(telemetryInitializer);var aiProperties=
{};var aiMeasurements={};aiProperties.payload=JSON.parse(this.data);aiProperties.httpResponse=jqXHR.status;aiProperties.callType=callType;aiProperties.browserRequestId=browserRequestId;aiProperties.eachServiceStatus={};aiProperties.appStatus={};aiProperties.servletResponded="no";aiProperties.hasInvocaCookie=bHasInvocaCookie;aiProperties.hasSmsessionCookie=bHasSmsessionCookie;aiProperties.cookieSize=cookieSize;aiProperties.cookies=cookieObj;aiMeasurements.totalElapsedTime=0;var trackEventObj={};trackEventObj.name=
aiProperties.callType;trackEventObj.properties=aiProperties;trackEventObj.measurements=aiMeasurements;console.error("TPG: saveProduct: error: call trackEvent with "+JSON.stringify(trackEventObj));appInsights.trackEvent(trackEventObj)}catch(e$43){console.error("TPG: saveProduct: error: error processing application insights: "+e$43)}HRB.products.showTPGErrorLogs(callType,jqXHR);tpgSaveProductFailure()}})}function delayThenGoToLogin(targetURL){HRB.tools.log("TPG: delayThenGoToLogin: waiting "+HRBData.config.appInsightsDelay+
" milliseconds...");setTimeout(function(){saveProductGoToLogin(targetURL)},HRBData.config.appInsightsDelay)}function saveProductGoToLogin(targetURL){HRB.tools.log("TPG: saveProductGoToLogin: url is "+targetURL);window.top.location=targetURL}function createGUAurl(guid){var url=HRB.integration.getURL("TCX");url=url+"/hrblock/weblogin/LoginRegistration.hrbx?PS=Y&TaxYear="+currTaxYear+"&Domain=TPS&userType=seg2&TaxType=TPG&HT=F&tn=TPGInterview&FV=T&showStartwithoutAccount=false&PartnerID="+partnerId+
"&tpgguid="+guid;HRB.tools.log("TPG: createGUAurl: url: "+url);return url}},processTpgPricing:function(){function tpgGetPriceSuccess(){try{if(typeof tpgGetPriceSuccessCallback!="undefined"){HRB.tools.log("TPG: processTpgPricing: tpgGetPriceSuccess calling tpgGetPriceSuccessCallback");tpgGetPriceSuccessCallback()}}catch(e$44){}}function tpgGetPriceFailure(){try{if(typeof tpgGetPriceFailureFallback!="undefined"){console.error("TPG: processTpgPricing: tpgGetPriceFailure calling tpgGetPriceFailureFallback");
tpgGetPriceFailureFallback()}}catch(e$45){}}var fcgp=HRB.tools.getQueryUrl("fcgp");if(fcgp&&fcgp.length>0)sessionStorage.removeItem("tpgPrices");var currTaxYear=HRB.integration.configLookup.TAXYEAR;var tpgPrices=getTpgPrices();if(tpgPrices!=null){HRB.products.displayTpgPricing(currTaxYear);tpgGetPriceSuccess()}else{var browserRequestId=Math.floor(Math.random()*Math.floor(1E12));console.log("TPG: processTpgPricing: ****************** BEGIN ****************");var getPricesPayLoad={"taxYear":currTaxYear,
"browserRequestId":browserRequestId};var fcgp=HRB.tools.getQueryUrl("fcgp");if(fcgp&&fcgp.length>0)getPricesPayLoad.forceCondition=fcgp;var bHasInvocaCookie=HRB.tools.getCookie("invoca_session")==null?false:true;var bHasSmsessionCookie=HRB.tools.getCookie("SMSESSION")==null?false:true;var cookieSize=0;try{cookieSize=encodeURIComponent(""+document.cookie).length}catch(e$46){var cookieSize=-1}var cookieObj={};try{var cookieArr=document.cookie.split(";");for(var i=0;i<cookieArr.length;i++){var cookieSeg=
cookieArr[i].trim();var firstEq=cookieSeg.indexOf("=");var name=cookieSeg.substr(0,firstEq);var value=cookieSeg.substr(firstEq+1).length;cookieObj[name]=value}}catch(e$47){}var payload=JSON.stringify(getPricesPayLoad);var callType="GetPrices";$.ajax({url:"/hrb-service/taxprogo/getPrices",dataType:"json",type:"POST",data:payload,contentType:"application/json",beforeSend:function(xhr){},success:function(data,status,jqXHR){try{var telemetryInitializer=function(envelope){envelope.data.appId="TPG"};appInsights.addTelemetryInitializer(telemetryInitializer);
var bRecordSuccesses=true;var bServletSuccess=null;var bCbsSuccess=null;var trackEventObj={};var aiProperties={};var aiMeasurements={};console.log("TPG: processTpgPricing: success: "+callType+" response is: "+JSON.stringify(data));aiProperties.payload=JSON.parse(this.data);aiProperties.httpResponse=jqXHR.status;aiProperties.callType=callType;aiProperties.browserRequestId=data.response.browserRequestId;aiProperties.eachServiceStatus=data.response.eachServiceStatus;aiProperties.appStatus=data.status;
aiProperties.servletResponded="yes";aiProperties.hasInvocaCookie=bHasInvocaCookie;aiProperties.hasSmsessionCookie=bHasSmsessionCookie;aiProperties.cookieSize=cookieSize;aiProperties.cookies=cookieObj;aiMeasurements.totalElapsedTime=data.status.totalEt;bServletSuccess=data.status.status.toUpperCase()=="SUCCESS"?true:false;bCbsSuccess=data.response.eachServiceStatus.cbsStatus.toUpperCase()=="SUCCESS"?true:false;aiProperties.servletSuccess=bServletSuccess;aiProperties.cbsSuccess=bCbsSuccess;trackEventObj.name=
aiProperties.callType;trackEventObj.properties=aiProperties;trackEventObj.measurements=aiMeasurements;if(bServletSuccess&&bRecordSuccesses){console.log("TPG: processTpgPricing: success: calling SUCCESS trackEvent with "+JSON.stringify(trackEventObj));appInsights.trackEvent(trackEventObj)}else if(!bServletSuccess){console.log("TPG: processTpgPricing: success: calling FAILURE trackEvent with "+JSON.stringify(trackEventObj));appInsights.trackEvent(trackEventObj)}}catch(e$48){console.error("TPG: processTpgPricing: success: "+
callType+" error: "+e$48)}if(typeof data!=undefined&&data.status.status.toLowerCase()==="success")if(data.response!=null&&data.response.skuArray&&data.response.skuArray.length>0){var skuArray=data.response.skuArray;HRB.session.initItem("tpgPrices",JSON.stringify({"browserRequestId":browserRequestId,"skuArray":skuArray}));HRB.products.displayTpgPricing(currTaxYear);console.log("TPG: processTpgPricing: "+JSON.stringify(data.response));tpgGetPriceSuccess()}else{HRB.products.showTPGErrorLogs(callType,
data);console.error("TPG: processTpgPricing: "+callType+" response is null or no products in array",data);tpgGetPriceFailure()}else{HRB.products.showTPGErrorLogs(callType,data);console.error("TPG: processTpgPricing: "+callType+" data is undefined or unsuccessful status",data);tpgGetPriceFailure()}},complete:function(jqXHR,textStatus){console.log("TPG: processTpgPricing: complete: getPrices textStatus:"+textStatus)},error:function(jqXHR){try{var telemetryInitializer=function(envelope){envelope.data.appId=
"TPG"};appInsights.addTelemetryInitializer(telemetryInitializer);var aiProperties={};var aiMeasurements={};aiProperties.payload=JSON.parse(this.data);aiProperties.httpResponse=jqXHR.status;aiProperties.callType=callType;aiProperties.browserRequestId=browserRequestId;aiProperties.eachServiceStatus={};aiProperties.appStatus={};aiProperties.servletResponded="no";aiProperties.hasInvocaCookie=bHasInvocaCookie;aiProperties.hasSmsessionCookie=bHasSmsessionCookie;aiProperties.cookieSize=cookieSize;aiProperties.cookies=
cookieObj;aiMeasurements.totalElapsedTime=0;var trackEventObj={};trackEventObj.name=aiProperties.callType;trackEventObj.properties=aiProperties;trackEventObj.measurements=aiMeasurements;console.error("TPG: processTpgPricing: error: calling ERROR trackEvent with "+JSON.stringify(trackEventObj));appInsights.trackEvent(trackEventObj)}catch(e$49){console.error("TPG: processTpgPricing: error: "+e$49)}HRB.products.showTPGErrorLogs(callType,jqXHR);tpgGetPriceFailure()}})}function getTpgPrices(){try{var tpgPrices=
JSON.parse(HRB.session.getValue("tpgPrices"));console.log("TPG: getTpgPrices : tpgPrices from SS is '"+tpgPrices+"'");if(tpgPrices)if(tpgPrices["browserRequestId"]&&tpgPrices["skuArray"]&&tpgPrices["skuArray"].length>0)return tpgPrices}catch(e$50){console.error("TPG: getTpgPrices: exception: "+e$50)}return null}},showTPGErrorLogs:function(servicecallType,errorObj){var callType={};callType.getPrices="GetPrices";callType.saveProduct="SaveProduct";var servletError={};var errString="TPG: showTPGErrorLogs: "+
servicecallType+" failed. ";var isEmptyResponse=$.isEmptyObject(errorObj.response);servletError["callType"]=servicecallType;if(errorObj.response&&!isEmptyResponse){if(errorObj.response.skuArray==null&&servicecallType==callType.getPrices){servletError["skuArray"]=errorObj.response.skuArray;console.error("TPG: showTPGErrorLogs: "+servicecallType+" : skuArray in response is null")}servletError["cbsStatus"]=errorObj.response.eachServiceStatus.cbsStatus;servletError["cbsErrorCode"]=errorObj.response.eachServiceStatus.cbsErrorCode;
servletError["cbsMsg"]=errorObj.response.eachServiceStatus.cbsMsg;if(servicecallType==callType.saveProduct){servletError["tcxStatus"]=errorObj.response.eachServiceStatus.tcxStatus;servletError["tcxErrorCode"]=errorObj.response.eachServiceStatus.tcxErrorCode;servletError["tcxMsg"]=errorObj.response.eachServiceStatus.tcxMsg}}else{console.error("TPG: showTPGErrorLogs: "+servicecallType+" response is "+errorObj.responseJSON);servletError["readyState"]=errorObj.readyState;servletError["statusText"]=errorObj.statusText;
servletError["status"]=errorObj.status}if(errorObj.status){servletError["status"]=errorObj.status.status;servletError["errorCode"]=errorObj.status.errorCode;servletError["errorMsg"]=errorObj.status.errorMsg}else;console.error("TPG: showTPGErrorLogs: "+errString+JSON.stringify(servletError))}}}}(jQuery);function offermaticaPartnerSelect(om_partner_id){}
function Page(){var tunneled=false;var queryMap=null;var ref=null;var refPartner=null;var searchTerm=null;var campaignId=null;var path=null;this.setQueryMap=function(queryMap){this.queryMap=queryMap};this.getQueryMap=function(){return this.queryMap};this.setReferrer=function(ref){this.ref=ref};this.getReferrer=function(){return this.ref};this.setRefPartner=function(refPtr){this.refPartner=refPtr};this.getRefPartner=function(){return this.refPartner};this.setSearchTerm=function(srchTerm){this.searchTerm=
srchTerm};this.getSearchTerm=function(){return this.searchTerm};this.setCampaignId=function(campId){this.campaignId=campId};this.getCampaignId=function(){return this.campaignId};this.setPath=function(path){this.path=path};this.getPath=function(){return this.path}}
function PartnerProduct(){this.getObj=function(){return this._partner_product};this.setObj=function(prodlist){this._partner_product=prodlist};this.getPartnerInfo=function(){return this._partner_product.partner};this.getProductInfo=function(prodID){var t_prodlist=this._partner_product.prodList;for(var i=0;i<t_prodlist.length;i++)if(t_prodlist[i].pid==prodID)return t_prodlist[i];return null};this.getProductsByPlatform=function(platform){var prodarr=new Array;var t_prodlist=this._partner_product.prodList;
for(var i=0;i<t_prodlist.length;i++)if(t_prodlist[i].pl==platform)prodarr[prodarr.length]=t_prodlist[i];return prodarr};this.getProductBasePrice=function(prodID){return this.getProductInfo(prodID).bpr};this.getProductPartnerPrice=function(prodID){return this.getProductInfo(prodID).ppr};this.getPartnerTunnel=function(){return this._partner_product.partner.partnerTunnel};this.getPartnerWelcomeText=function(){return this._partner_product.partner.welcome};this.getPartnerType=function(){return this._partner_product.partner.partnerType};
this.getProductName=function(prodID){if(prodID!=-1)if(this._partner_product.prodList.length)return this.getProductInfo(prodID).on;else return"nfd";else return"nfd"};this.getProductPlatform=function(prodID){if(this._partner_product.prodList.length)return this.getProductInfo(prodID).pl}}
function processMainCookie(){var g_partner_id_from_search_engine=HRB.partner.fromSearchEngine();var g_partner_id_from_url=HRB.partner.fromURL();var g_partner_id_from_cookie=HRB.partner.fromCookie();var g_partner_id_from_offermatica=HRB.partner.fromOffermatica();if(g_partner_id==HRB.spclEmpSolPartnerId){HRB.bIsSpclEmpSolPartner=true;if(HRBData.config.bSpclEmpSolEnabled&&g_partner_id_from_url==HRB.spclEmpSolPartnerId)HRB.bForcePartnerChange=true}HRB.tools.log("processMainCookie():g_partner_id_from_search_engine:"+
g_partner_id_from_search_engine);HRB.tools.log("processMainCookie():g_partner_id_from_url:"+g_partner_id_from_url);HRB.tools.log("processMainCookie():g_partner_id_from_cookie:"+g_partner_id_from_cookie);HRB.tools.log("processMainCookie():g_partner_id_from_offermatica:"+g_partner_id_from_offermatica);HRB.tools.log("<b>Inside processMainCookie</b>");var qs="";var tempQS="";qs=location.search;HRB.tools.log("1 query:"+qs);var temp=qs.split("&");var newQS="";for(var x=0;x<temp.length;x++)if(temp[x].indexOf("omnisource")==
-1){if(x!=0)newQS+="&";newQS+=temp[x]}qs=unescape(newQS);HRB.tools.log("2 query:"+qs);var parmsToAlwaysSave=["reffriendid"];var addTheseToCookie="";var pValue=null;for(var pIndex=0;pIndex<parmsToAlwaysSave.length;pIndex++)try{pValue=HRB.tools.getQueryUrl(parmsToAlwaysSave[pIndex]);if(pValue!=null)addTheseToCookie+="&"+parmsToAlwaysSave[pIndex]+"="+pValue}catch(e$51){}if(g_partner_id_from_offermatica!=""&&g_partner_id_from_offermatica!=null){HRB.tools.log("processMainCookie(): writing partner id '"+
g_partner_id_from_offermatica+"' assigned by offermatica. Call setCookie('main_cookie','otpPartnerId="+g_partner_id+"&PartnerId="+g_partner_id+"')<br/>");HRB.session.storeValue("main_cookie","&otpPartnerId="+g_partner_id+"&PartnerId="+g_partner_id+addTheseToCookie)}else if(g_partner_id_from_url!=""&&g_partner_id_from_url!=null)if(g_partner_id_from_url==g_partner_id_from_cookie&&!HRB.bForcePartnerChange)HRB.tools.log("processMainCookie(): no need to write/re-write main_cookie since g_partner_id_from_url["+
g_partner_id_from_url+"] == g_partner_id_from_cookie["+g_partner_id_from_cookie+"].  Re-writing would delete site-visit parm values anyway.<br/>");else{if(qs.indexOf("?")!=-1)qs=qs.slice(qs.indexOf("?")+1);tempQS=qs.toLowerCase();iBeginPos=tempQS.indexOf("otppartnerid");qs=qs.substring(0,iBeginPos)+"otpPartnerId="+qs.substring(iBeginPos+13,qs.length);HRB.tools.log("processMainCookie(): g_partner_id_from_url["+g_partner_id_from_url+"] != g_partner_id_from_cookie["+g_partner_id_from_cookie+"] so write g_partner_id["+
g_partner_id+"] to the cookie.<br/>");HRB.session.storeValue("main_cookie","&"+qs+"&PartnerID="+g_partner_id)}else if(g_partner_id_from_cookie!=""&&g_partner_id_from_cookie!=null)HRB.tools.log("processMainCookie(): g_partner_id_from_cookie["+g_partner_id_from_cookie+"] is not == '' and not == null, so don't write main_cookie.<br/>");else if(g_partner_id_from_search_engine!=""&&g_partner_id_from_search_engine!=null){HRB.tools.log("processMainCookie(): g_partner_id_from_search_engine["+g_partner_id_from_search_engine+
"] valued so write it to main_cookie.<br/>");HRB.session.storeValue("main_cookie","&otpPartnerId="+g_partner_id+"&PartnerId="+g_partner_id_from_search_engine+"&srchTerm="+HRB.page.getPageProperties().getSearchTerm()+addTheseToCookie)}else{if(qs.indexOf("?")!=-1)qs=qs.slice(qs.indexOf("?")+1);HRB.tools.log("processMainCookie(): no partner id available from anywhere so use default partner id for this domain + current query string.<br/>");HRB.session.storeValue("main_cookie","&"+qs+"&otpPartnerId="+
g_partner_id+"&PartnerID="+g_partner_id)}}function getDR_cookie_info(){var cookieVal="";g_b_drInfoInCookie=false;if(HRB.session.getValue("digitalriver")!=null){cookieVal=HRB.tools.getQueryParam("CamryID",HRB.session.getValue("digitalriver"));if(cookieVal!=null&&cookieVal!=""){cookieVal="CamryID="+cookieVal;g_b_drInfoInCookie=true}}return cookieVal}function getDR_ws_info(){return useThisCID}
function processDigitalRiverCookie(){var tcid=HRB.tools.getQueryUrl("CamryID");if(tcid!=null)g_dr_url_info="CamryID="+HRB.tools.getQueryUrl("CamryID");HRB.tools.log("<b>Inside processDigitalRiverCookie</b>");var pidFromSoftwareCookie=HRB.tools.getQueryParam("otppartnerid",HRB.session.getValue("digitalriver"));HRB.tools.log("pidFromSoftwareCookie:"+pidFromSoftwareCookie);if(g_partner_id!=pidFromSoftwareCookie){HRB.session.storeValue("digitalriver","");HRB.tools.log("processDigitalRiverCookie: write digitalriver with empty string");
HRB.tools.log("processDigitalRiverCookie : g_partner_id:"+g_partner_id+" != getCookiePartnerId:"+pidFromSoftwareCookie)}var dr_cookie_info=getDR_cookie_info();var dr_ws_info=getDR_ws_info();var tempValue="";if(g_b_ws_partner_id_different){tempValue=g_partner_cid;HRB.tools.log("processDigitalRiverCookie: use DR info from pricing service response :"+tempValue)}else if(g_dr_url_info!=""&&(g_partner_id==pidFromSoftwareCookie||!g_b_drInfoInCookie)){tempValue=g_dr_url_info;HRB.tools.log("processDigitalRiverCookie: use DR info from url :"+
tempValue)}else if(g_b_drInfoInCookie&&g_partner_id==pidFromSoftwareCookie){tempValue=dr_cookie_info;HRB.tools.log("processDigitalRiverCookie: use DR info from COOKIE :"+tempValue)}else if(dr_ws_info!=null&&dr_ws_info!=""&&dr_ws_info!=0){tempValue=dr_ws_info;HRB.tools.log("processDigitalRiverCookie: use DR info from ws call:"+tempValue);if(HRBData.config.bAddCamryIdToZero&&(otp_partner_id==0||otp_partner_id==2631))tempValue="CamryID="+HRBData.config.CamryIdForZero;if(HRBData.config.bEnablePidCamryOverride){var overrideCid=
HRBData.config.pidCamryOverride[otp_partner_id];if(typeof overrideCid!="undefined")tempValue="CamryID="+overrideCid}}else tempValue="";g_partner_cid=tempValue;if(tempValue!="")tempValue="&otppartnerid="+g_partner_id+"&"+tempValue;HRB.session.storeValue("digitalriver",tempValue);HRB.tools.log("processDigitalRiverCookie :: value digitalriver with "+tempValue);HRB.tools.log("processDigitalRiverCookie :: main cookie:"+HRB.session.getValue("main_cookie")+" DR cookie:"+HRB.session.getValue("digitalriver"))}
function campaignIdCheck(){var g_campaign_id=HRB.tools.getQueryUrl("CampaignID");HRB.tools.log("top of campaignIdCheck(): CampaignID in url is '"+g_campaign_id);if(g_campaign_id!=null){HRB.session.storeValue("hrblockCampaignIDcookie","CampaignID="+g_campaign_id);HRB.tools.log("campaignIdCheck(): cookie 'hrblockCampaignIDcookie' set to 'CampaignID="+g_campaign_id+"'.<br/>")}else HRB.tools.log("campaignIdCheck(): do not write cookie 'hrblockCampaignIDcookie' since it wasn't in the url.<br/>")}
g_sys={checkEnv:function(){return HRB.tools.checkEnv()}};
function getYodleeParameters(){var yodleeParms="";var m_cookie=HRB.session.getValue("main_cookie");if(m_cookie!=null&&m_cookie.indexOf("oauth")!=-1){yodleeParms="&coname="+encodeURIComponent(HRB.tools.getQueryParam("coname",m_cookie));yodleeParms+="&coid="+encodeURIComponent(HRB.tools.getQueryParam("coid",m_cookie));yodleeParms+="&oauth_consumer_key="+encodeURIComponent(HRB.tools.getQueryParam("oauth_consumer_key",m_cookie));yodleeParms+="&oauth_nonce="+encodeURIComponent(HRB.tools.getQueryParam("oauth_nonce",
m_cookie));yodleeParms+="&oauth_signature_method="+encodeURIComponent(HRB.tools.getQueryParam("oauth_signature_method",m_cookie));yodleeParms+="&oauth_timestamp="+encodeURIComponent(HRB.tools.getQueryParam("oauth_timestamp",m_cookie));yodleeParms+="&oauth_version="+encodeURIComponent(HRB.tools.getQueryParam("oauth_version",m_cookie));yodleeParms+="&oauth_signature="+encodeURIComponent(HRB.tools.getQueryParam("oauth_signature",m_cookie));yodleeParms+="&uid="+encodeURIComponent(HRB.tools.getQueryParam("uid",
m_cookie))}return yodleeParms}function WinOpen_(page,w,h){popupWin=open(page,"popup","status=yes,toolbar=no,directories=no,scrollbars=yes,menubar=no,resizable=yes,width="+w+",height="+h);popupWin.focus()}
function getAddress(position){var lat=position.coords.latitude;var lon=position.coords.longitude;$('input[name="geo"]').val(lat+","+lon);$.getJSON("/locator-service/officeservice/ol/001/data/getOfficeDetailsOrderByDistance?query=lt:"+lat+","+lon+"|d:30|s:s&callback=?",null,function(results){$(".map").attr("src","//maps.googleapis.com/maps/api/staticmap?center="+lat+","+lon+"&zoom=15&size="+HRB.locator.mapSize+"&sensor=false&markers=color:green%7Clabel:*%7C"+lat+","+lon+"");$("#officeAddrTmpl").tmpl(results.ftLocations[0]).appendTo(".tax_office");
$("#officeAddrTmpl").tmpl(results.ftLocations[0]).appendTo(".office-address");$("#office-id").val(results.ftLocations[0].tax_id)});$.getJSON("//maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&sensor=true",null,function(dd){try{$('input[name="add"]').val(dd.results[0].formatted_address)}catch(e$52){}})}HRB.tools.log("TEST SESSION STORAGE");HRB.session.testSessionStorage();if(HRB.session.getValue("OI")==null)HRB.session.storeValue("OI",JSON.stringify(HRB.session.officePod));
function alreadyInAdobePriceTest(){var acv=sessionStorage["adobePartnerId"];return acv!=null&&acv!=""?true:false}function removeAdobePriceTestObject(){HRB.tools.log("pricing: removing 'adobePartnerId' session object");sessionStorage.removeItem("adobePartnerId");HRB.bRemoveAdobeSessionObject=true}function hasValue(v){if(typeof v!="undefined"&&v!=null&&v!="")return true;return false}var bForceRedirectNow=false;
function isFFA(pid){try{if(HRBData.config.ffaPartners.indexOf(pid+"")!=-1)return true;else return false}catch(e$53){console.error("FFA: HRBData.config.ffaPartners not defined");return false}}var href=document.location.href.toLowerCase();var thePartnerIdInUrl=HRB.partner.fromURL();var thePartnerIdFromCookie=HRB.partner.fromCookie();HRB.tools.log("FFA: FFA PAGE CHECK");
if(href.indexOf("/ffa")!=-1){HRB.tools.log("FFA: on FFA page.");if(href.indexOf("/ffa/terms_conditions.html")!=-1||href.indexOf("/ffa/universal/digital-online-mobile-privacy-principles.html")!=-1);else if(thePartnerIdInUrl==null){HRB.tools.log("FFA: partner in URL is null.  Redirect to FFA page with partner 180.");window.location="/ffa/?otpPartnerId=180&campaignId=pw_mcm_180_0001";bForceRedirectNow=true}else if(thePartnerIdInUrl!=null&&!isFFA(thePartnerIdInUrl)){HRB.tools.log("FFA: partner "+HRB.partner.fromURL()+
" in URL is not an FFA partner.  Go to home page.");window.location="/?otpPartnerId="+thePartnerIdInUrl;bForceRedirectNow=true}else if(thePartnerIdInUrl=="180"&&href.indexOf("campaignid=pw_mcm_180_0001")==-1){HRB.tools.log("FFA: partner 180 must have campaignId=pw_mcm_180_0001. redirecting now.");window.location="/ffa/?otpPartnerId=180&campaignId=pw_mcm_180_0001";bForceRedirectNow=true}else HRB.tools.log("FFA: no redirect as partner "+thePartnerIdInUrl+" is valid for the FFA page")}else{HRB.tools.log("FFA: not on FFA page.");
if(thePartnerIdInUrl!=null){HRB.tools.log("FFA: partner in URL is "+thePartnerIdInUrl);if(isFFA(thePartnerIdInUrl)){HRB.tools.log("FFA: redirect to FFA page for FFA partner "+thePartnerIdInUrl);window.location="/ffa/?otpPartnerId="+thePartnerIdInUrl;bForceRedirectNow=true}else HRB.tools.log("FFA: no redirect as partner "+thePartnerIdInUrl+" in URL is not FFA")}else{HRB.tools.log("FFA: no partner in URL");if(isFFA(thePartnerIdFromCookie)){HRB.tools.log("FFA: partner "+thePartnerIdFromCookie+" in cookie is FFA so reload page with partner 0.");
window.location=window.location.pathname+"?otpPartnerId=0";bForceRedirectNow=true}else HRB.tools.log("FFA: no redirect as no on FFA page, partner in cookie is not FFA")}}
$(document).ready(function(){if(bForceRedirectNow)HRB.tools.log("FFA: skipping document.ready processing");else{var bazaarVoiceCallback=function(){return};try{if(HRBData.config.guaMaintenance){var linkHrefValue="";$("a").each(function(){linkHrefValue=$(this).attr("href");if(linkHrefValue.indexOf("loginrouter")!=-1)$(this).attr("href",HRBData.config.guaMaintPage)})}}catch(e$54){}$('[class^="form-search"]').submit(function(event){HRB.search.getSearch({"form":this,"event":event})});$(".form-appointment").submit(function(event){HRB.locator.getLocations({"form":this,
"event":event})});$(".location-cta").click(function(event){});$(".appointment-cta").click(function(event){HRB.integration.getApptUrl($(this).closest("form").find("#office-id").val())});$(".form-email").submit(function(event){HRB.integration.submitEmail({"form":this,"event":event})});$(".tile-email-submit").submit(function(event){HRB.integration.submitEmail({"form":this,"event":event})});$(".create-account").on("click",function(){var $type=$("#product-type").val();window.location="/online-tax-filing/create-account.html?taxType="+
$type;return false});$("a.click-tab").on("click",function(){var $href=$(this).data("href");$('a[href="'+$href+'"]').trigger("click")});$(".speed-bump").click(function(){var $href=$(this).data("href");$(".speed-bump-continue").on("click",function(){window.location=$href;return false})});$(".product-tab-activate").on("click",function(e){$("#product-info-anchor").click()});$(".compare-tab-activate").on("click",function(e){$("#compare-anchor").click()});$(".requirements-tab-activate").on("click",function(e){$("#requirements-anchor").click()});
$(".reviews-tab-activate").on("click",function(e){$("#reviews-anchor").click()});var hasNav=HRB.tools.getParameterByName("nav");if(hasNav)setTimeout(function(){var $offset=$("#"+hasNav).offset().top;$('a[href="#'+hasNav+'"]').trigger("click");$("html, body").animate({scrollTop:$offset-150});return false},500);g_partner_id=HRB.partner.determinePartnerId();if(g_partner_id==2007)document.location="/?otpPartnerId=0";processMainCookie();campaignIdCheck();HRB.ui.initializeTprObject();HRB.products.processPricing();
try{HRB.ui.initializeTpgObject();HRB.products.processTpgPricing()}catch(e$55){console.error("TPG: error occurred. "+e$55)}try{HRB.tools.log("calling partnerIdDetermined('"+g_partner_id+"').");partnerIdDetermined(g_partner_id)}catch(e$56){HRB.tools.log("calling partnerIdDetermined('"+g_partner_id+"') returned: '"+e$56+"'. Containing page does NOT need to implement function partnerIdDetermined().")}$(document).on("click",'[class*="track-"]',function(event){if(typeof $(this).data("track")=="undefined")HRB.tools.log(".ready: element has no data-track attribute.");
else{var data=jQuery.parseJSON($.toJSON($(this).data("track")));if($(this).hasClass("accordion-toggle"))if($(this).hasClass("collapsed"))return;var classValue=$(this).attr("class");HRB.omniture.doAnalytics(data,classValue);HRB.datatrack.processPixels(data);var preventdef=typeof data.pd!="undefined"?data.pd:"false";if(preventdef=="true")event.preventDefault();else return true;if(data.type=="sn")HRB.integration.productStartNow(data);if(data.type=="lm")HRB.integration.productLearnMore(data);if(data.type==
"dn"){var y=$(this).closest("form");var _swObj=jQuery.parseJSON($.toJSON($(this).data("track")));_swObj.os=y.find('[name="product-choice"]:checked').val();if(typeof _swObj.os=="undefined")_swObj.os="win";if(_swObj.os=="win")if(y.find("#state").val()==0){alert("Please select a  State.");return false}else _swObj.st=y.find("#state").val();else if(_swObj.os=="mac")if(y.find("#state-mac").val()==0){alert("Please select a  State.");return false}else _swObj.st=y.find("#state-mac").val();if(typeof _swObj.pid==
"undefined")if(_swObj.os=="mac")_swObj.pid=_swObj.skum;else if(_swObj.os=="win")_swObj.pid=_swObj.skuw;_swObj.yr=typeof _swObj.yr!="undefined"?_swObj.yr:HRBData.config.yearForSoftware;HRB.integration.productStartNow(_swObj)}}});HRB.pixel.processPixel();HRB.ui.setTprByProduct();HRB.ui.setMDLTprSelections();HRB.ui.setSoftwareOpSysSelectionText();HRB.ui.setSoftwareDownloadAccessibilityText();var disclaimerNumber=HRB.tools.getQueryUrl("odisc");var reg=/^\d+$/;if(disclaimerNumber!=null&&reg.test(disclaimerNumber))$('<sup><a id="disclaimer-link'+
disclaimerNumber+'"class="js-disclaimer-link" aria-hidden="true" tab-index="-1" href="#legal-disclaimer" style="display:none;visiblity:hidden">'+disclaimerNumber+"</a></sup>").appendTo($("body"));HRB.ui.setDisclaimerBehavior();HRB.ui.setAccessibilityProductLinkText();HRB.ui.setAccessibilityTileContentLinkText();HRB.ui.setAccessibilityForBlankTarget();HRB.ui.setAccessibilityLandmarks();HRB.ui.setAccessibilityHeadingTags();HRB.ui.setAccessibilityArticleTags();$("select.fancy").each(function(){HRB.ui.select().config($(this))});
$(".accordion").each(function(){HRB.ui.accordion().config($(this))});$(document.body).on("keydown","*[role=button]",function(e){if($(this).is("a")){if(e.keyCode==32)$(this).trigger("click")}else if(e.keyCode==32||e.keyCode==13)$(this).trigger("click")});$(".js-phone-number").click(function(event){try{if(HRB.libraries.isHrObj()&&HR.Utils.isMobile.any()){var dialedNum=this.textContent;HRBData.digital_data.loc="b";HRBData.digital_data.nm="phone number click";HRBData.digital_data.office_phone_number=
dialedNum;HRB.analytics.callRule("click_to_call_opened");HRB.tools.log("DTM: Call rule click_to_call_opened")}}catch(e$57){HRB.tools.log("DTM: Call rule click : Error "+e$57)}});if(disclaimerNumber!=null&&reg.test(disclaimerNumber))$("#disclaimer-link"+disclaimerNumber).trigger("click");if(HRB.tools.getQueryUrl("showPodInfo")=="1")$('[class^="pod-info"]').on("click",function(event){if($("#deletePods").length==0){var data=jQuery.parseJSON($.toJSON($(this).data("pod-info")));var podPath=typeof data.path!=
"undefined"?data.path:"unknown pod";$(this).append("<div>"+podPath+"</div>");$(this).append('<a id="deletePods" href="javascript:HRB.ui.deleteAllPods(\''+podPath+"');\">Delete All Pods Except This</a>")}});if(HRB.session.getValue("initialReferer")==null)if(document.referrer!="")HRB.session.storeValue("initialReferer",document.referrer);else if(HRB.tools.getQueryUrl("ivrtype")!=null&&HRB.tools.getQueryUrl("ivrtype")!="")HRB.session.storeValue("initialReferer","ivr-"+HRB.tools.getQueryUrl("ivrtype"));
else HRB.session.storeValue("initialReferer","n/a");if(HRB.session.getValue("ci")==null)HRB.session.initItem("ci",JSON.stringify(HRB.session.clientInfo));if(HRB.session.getValue("noByAddr")==null)HRB.session.initItem("noByAddr",JSON.stringify(HRB.session.noByAddr));if(HRB.session.getValue("noByLoc")==null)HRB.session.initItem("noByLoc",JSON.stringify(HRB.session.noByLoc));if(typeof initBV==="function")initBV(bazaarVoiceCallback);$("[data-bvrating-id]").each(function(){HRB.ui.BVratings.writeRatings($(this))})}if(HRB.bRemoveAdobeSessionObject)removeAdobePriceTestObject()});
function openWin(url){window.open(url)}
function processPixelTracking(_token){var bVirtualPageToken=typeof _token!="undefined"&&_token!=null&&_token=="omnivirtual"?true:false;var _url_or_token=null;var add_params=null;if(typeof _token!="undefined"&&_token!=null&&_token!=""){_url_or_token=_token;if(typeof arguments[1]!="undefined"&&arguments[1]!=null&&arguments[1]!="")add_params=arguments[1];HRB.tools.log("###processPixelTracking:TOKEN '"+_token+"' specified.  Additional parameters (if any) are: "+add_params)}else if(typeof location.pathname!=
"undefined"||location.pathname!=null){_url_or_token=location.pathname;if(_url_or_token.indexOf("/")!=-1&&_url_or_token.indexOf(".html")==-1)_url_or_token=_url_or_token+"index.html";if(location.href.indexOf("ttiptitle")!=-1)if(typeof g_tax_tip_id!="undefined")_url_or_token="TAXTIP";var urlParam=location.search;if((typeof location.search!="undefined"||urlParam!=null)&&urlParam.indexOf("action=findappointment")!=-1)_url_or_token=_url_or_token+location.search;HRB.tools.log("###processPixelTracking:TOKEN not specified. _url_or_token:"+
_url_or_token)}var pixel_obj={_pixelobj:[],getPixels:function(_url_or_token){var tmppathname=location.pathname;if(tmppathname.indexOf("/")!=-1&&tmppathname.indexOf(".html")==-1)tmppathname=tmppathname+"index.html";for(var i=0;i<this._pixelobj.length;i++)if(this._pixelobj[i].pagetoken==_url_or_token)if(typeof this._pixelobj[i].exclusion!="undefined"){var _excl_px=new Array;for(var j=0;j<this._pixelobj[i].exclusion.length;j++){var exclusionArr=this._pixelobj[i].exclusion[j].split("$");var matchfound=
false;for(var k=0;k<exclusionArr.length;k++){var regex=new RegExp(exclusionArr[k]);if(tmppathname.match(regex)!=null){matchfound=true;break}}if(!matchfound)_excl_px[_excl_px.length]=this._pixelobj[i].pixel[j]}return _excl_px}else return this._pixelobj[i].pixel;return null},getExtImagePixels:function(_url_or_token){var tmppathname=location.pathname;if(tmppathname.indexOf("/")!=-1&&tmppathname.indexOf(".html")==-1)tmppathname=tmppathname+"index.html";for(var i=0;i<this._pixelobj.length;i++)if(this._pixelobj[i].pagetoken==
_url_or_token)if(typeof this._pixelobj[i].imgpixel!="undefined")return this._pixelobj[i].imgpixel;else return null;return null}};var pixDiv=document.createElement("div");pixDiv.setAttribute("id","hrb_pixel_tracker_div");pixDiv.style.width="0px";pixDiv.style.height="0px";pixDiv.style.overflow="hidden";document.body.appendChild(pixDiv);var pixel_arr_gen=null;if(typeof _token!="undefined"&&_token!=null&&_token!="")pixel_arr_gen=null;else pixel_arr_gen=pixel_obj.getPixels("GENERIC");var pixel_arr=pixel_obj.getPixels(_url_or_token);
if(pixel_arr!=null){if(pixel_arr_gen!=null)pixel_arr=pixel_arr_gen.concat(pixel_arr)}else pixel_arr=pixel_arr_gen;if(pixel_arr!=null)for(var i=0;i<pixel_arr.length;i++)if(pixel_arr[i]!=null){var _ifobj=pixelCreateIFrame(pixel_arr[i],add_params);pixDiv.appendChild(_ifobj)}var pixel_extImage=pixel_obj.getExtImagePixels(_url_or_token);if(pixel_extImage!=null){var imgpixel=new Image;imgpixel.src=pixel_extImage;HRB.tools.log("###processPixelTracking:Image Pixel source is "+pixel_extImage)}}
function createIframe(_frameURL,_attr){var rand_frameid="pixel_frame_"+parseInt(Math.random()*100);var iframe=document.createElement("IFRAME");if(typeof _attr=="undefined"||_attr==null){iframe.style.width="30px";iframe.style.height="0px";iframe.style.border="0px";iframe.width="30px";iframe.height="0px";iframe.title="pixel-iframe-"+Math.floor(Math.random()*1E3+1);iframe.setAttribute("tabindex","-1");iframe.setAttribute("aria-hidden","true")}else{iframe.style.width=_attr.w+"px";iframe.style.height=
_attr.h+"px";iframe.width=_attr.w+"px";iframe.height=_attr.h+"px";if(typeof _attr.b!="undefined"){iframe.style.border=_attr.b+"px";iframe.frameBorder=_attr.b}else{iframe.style.border="0px";iframe.frameBorder=0}if(typeof _attr.s!="undefined")iframe.scrolling=_attr.s==1?"yes":"no";else iframe.style.scrolling="no"}iframe.id=rand_frameid;iframe.src=_frameURL;HRB.tools.log("###processPixelTracking:createIframe("+_frameURL+","+_attr+"): iframe source is "+_frameURL);return iframe}
function pixelCreateIFrame(_frameURL,add_param){_frameURL="/includes/pixel/pix_"+_frameURL+(add_param==null?"":"?"+add_param);return createIframe(_frameURL)}function omnitureOnClick(){}
(function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null)return"null";var pairs,k,name,val,type=$.type(o);if(type==="undefined")return undefined;if(type==="number"||type==="boolean")return String(o);if(type==="string")return $.quoteString(o);if(typeof o.toJSON==="function")return $.toJSON(o.toJSON());
if(type==="date"){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10)month="0"+month;if(day<10)day="0"+day;if(hours<10)hours="0"+hours;if(minutes<10)minutes="0"+minutes;if(seconds<10)seconds="0"+seconds;if(milli<100)milli="0"+milli;if(milli<10)milli="0"+milli;return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}pairs=[];if($.isArray(o)){for(k=
0;k<o.length;k++)pairs.push($.toJSON(o[k])||"null");return"["+pairs.join(",")+"]"}if(typeof o==="object"){for(k in o)if(hasOwn.call(o,k)){type=typeof k;if(type==="number")name='"'+k+'"';else if(type==="string")name=$.quoteString(k);else continue;type=typeof o[k];if(type!=="function"&&type!=="undefined"){val=$.toJSON(o[k]);pairs.push(name+":"+val)}}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")};$.secureEvalJSON=typeof JSON===
"object"&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.");};$.quoteString=function(str){if(str.match(escape))return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==="string")return c;c=a.charCodeAt();return"\\u00"+
Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"';return'"'+str+'"'}})(jQuery);
!function($){$(function(){$.support.transition=function(){var transitionEnd=function(){var el=document.createElement("bootstrap"),transEndEventNames={"WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend","transition":"transitionend"},name;for(name in transEndEventNames)if(el.style[name]!==undefined)return transEndEventNames[name]}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery);
!function($){var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=$(selector);e&&e.preventDefault();$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent());$parent.trigger(e=$.Event("close"));if(e.isDefaultPrevented())return;$parent.removeClass("in");
function removeElement(){$parent.trigger("closed").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement()};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");if(!data)$this.data("alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})};$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.alert.data-api",
dismiss,Alert.prototype.close)}(window.jQuery);
!function($){var Button=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state=state+"Text";data.resetText||$el.data("resetText",$el[val]());$el[val](data[state]||this.options[state]);setTimeout(function(){state=="loadingText"?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)};Button.prototype.toggle=function(){var $parent=
this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active");this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options=typeof option=="object"&&option;if(!data)$this.data("button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.button.defaults={loadingText:"loading..."};$.fn.button.Constructor=
Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};$(document).on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");$btn.button("toggle")})}(window.jQuery);
!function($){var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.options.pause=="hover"&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){if(!e)this.paused=false;if(this.interval)clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));
return this},getActiveIndex:function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(pos>this.$items.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid",function(){that.to(pos)});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},pause:function(e){if(!e)this.paused=
true;if(this.$element.find(".next, .prev").length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle(true)}clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(type,next){var $active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction=type=="next"?"left":"right",fallback=
type=="next"?"first":"last",that=this,e;this.sliding=true;isCycling&&this.pause();$next=$next.length?$next:this.$element.find(".item")[fallback]();e=$.Event("slide",{relatedTarget:$next[0],direction:direction});if($next.hasClass("active"))return;if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})}if($.support.transition&&
this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented())return;$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger("slid")},0)})}else{this.$element.trigger(e);if(e.isDefaultPrevented())return;$active.removeClass("active");
$next.addClass("active");this.sliding=false;this.$element.trigger("slid")}isCycling&&this.cycle();return this}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,typeof option=="object"&&option),action=typeof option=="string"?option:options.slide;if(!data)$this.data("carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();
else if(options.interval)data.pause().cycle()})};$.fn.carousel.defaults={interval:false,pause:"hover"};$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var $this=$(this),href,$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data()),slideIndex;$target.carousel(options);var $active=
$target.find(".item.next, .item.prev");setTimeout(function(){$active.focus()},800);if(slideIndex=$this.attr("data-slide-to"))$target.data("carousel").pause().to(slideIndex).cycle();e.preventDefault()})}(window.jQuery);
!function($){var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.collapse.defaults,options);if(this.options.parent)this.$parent=$(this.options.parent);this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(this.transitioning||this.$element.hasClass("in"))return;dimension=this.dimension();
scroll=$.camelCase(["scroll",dimension].join("-"));actives=this.$parent&&this.$parent.find("> .accordion-group > .in");if(actives&&actives.length){hasData=actives.data("collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide");hasData||actives.data("collapse",null)}this.$element[dimension](0);this.transition("addClass",$.Event("show"),"shown");$.support.transition&&this.$element[dimension](this.$element[0][scroll])},hide:function(){var dimension;if(this.transitioning||!this.$element.hasClass("in"))return;
dimension=this.dimension();this.reset(this.$element[dimension]());this.transition("removeClass",$.Event("hide"),"hidden");this.$element[dimension](0)},reset:function(size){var dimension=this.dimension();this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth;this.$element[size!==null?"addClass":"removeClass"]("collapse");return this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){if(startEvent.type=="show")that.reset();that.transitioning=
0;that.$element.trigger(completeEvent)};this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;this.transitioning=1;this.$element[method]("in");$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=$.extend({},
$.fn.collapse.defaults,$this.data(),typeof option=="object"&&option);if(!data)$this.data("collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})};$.fn.collapse.defaults={toggle:true};$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var $this=$(this),href,target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,
""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed");$(target).collapse(option)})}(window.jQuery);
!function($){var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,isActive;if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement)$('<div class="dropdown-backdrop"/>').insertBefore($(this)).on("click",
clearMenus);$parent.toggleClass("open")}$this.focus();return false},keydown:function(e){var $this,$items,$active,$parent,isActive,index;if(!/(38|40|27)/.test(e.keyCode))return;$this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");if(!isActive||isActive&&e.keyCode==27){if(e.which==27)$parent.find(toggle).focus();return $this.click()}$items=$("[role=menu] li:not(.divider):visible a",$parent);if(!$items.length)return;
index=$items.index($items.filter(":focus"));if(e.keyCode==38&&index>0)index--;if(e.keyCode==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).focus()}};function clearMenus(){$(".dropdown-backdrop").remove();$(toggle).each(function(){getParent($(this)).removeClass("open")})}function getParent($this){var selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=selector&&
$(selector);if(!$parent||!$parent.length)$parent=$this.parent();return $parent}var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");if(!data)$this.data("dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})};$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.dropdown.data-api",clearMenus).on("click.dropdown.data-api",
".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery);
!function($){var Modal=function(element,options){this.options=options;this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.escape();
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length)that.$element.appendTo(document.body);that.$element.show();if(transition)that.$element[0].offsetWidth;that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger("shown")}):that.$element.focus().trigger("shown")})},hide:function(e){e&&e.preventDefault();var that=this;
e=$.Event("hide");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();$(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){if(that.$element[0]!==e.target&&!that.$element.has(e.target).length)that.$element.focus()})},escape:function(){var that=
this;if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&that.hide()});else if(!this.isShown)this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end);that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout);that.hideModal()})},hideModal:function(){var that=this;this.$element.hide();this.backdrop(function(){that.removeBackdrop();
that.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,
this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback):callback()}else if(callback)callback()}};var old=$.fn.modal;$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),
options=$.extend({},$.fn.modal.defaults,$this.data(),typeof option=="object"&&option);if(!data)$this.data("modal",data=new Modal(this,options));if(typeof option=="string")data[option]();else if(options.show)data.show()})};$.fn.modal.defaults={backdrop:true,keyboard:true,show:true};$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||
href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault();$target.modal(option).one("hide",function(){$this.focus()})})}(window.jQuery);
!function($){var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.enabled=true;triggers=this.options.trigger.split(" ");for(i=triggers.length;i--;){trigger=triggers[i];if(trigger=="click")this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if(trigger!=
"manual"){eventIn=trigger=="hover"?"mouseenter":"focus";eventOut=trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options);if(options.delay&&
typeof options.delay=="number")options.delay={show:options.delay,hide:options.delay};return options},enter:function(e){var defaults=$.fn[this.type].defaults,options={},self;this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value},this);self=$(e.currentTarget)[this.type](options).data(this.type);if(!self.options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout);self.hoverState="in";this.timeout=setTimeout(function(){if(self.hoverState==
"in")self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out";this.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(e);
if(e.isDefaultPrevented())return;$tip=this.tip();this.setContent();if(this.options.animation)$tip.addClass("fade");placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;$tip.detach().css({top:0,left:0,display:"block"});this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);pos=this.getPosition();actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;switch(placement){case "bottom":tp=
{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case "top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case "left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case "right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};break}this.applyPlacement(tp,placement);this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,
actualWidth,actualHeight,delta,replace;$tip.offset(offset).addClass(placement).addClass("in");actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight;replace=true}if(placement=="bottom"||placement=="top"){delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight}this.replaceArrow(delta-width+actualWidth,actualWidth,
"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");if(replace)$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")},hide:function(){var that=this,$tip=this.tip(),e=$.Event("hide");this.$element.trigger(e);if(e.isDefaultPrevented())return;
$tip.removeClass("in");function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout);$tip.detach()})}$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string")$e.attr("data-original-title",$e.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},
arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+
this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options=typeof option=="object"&&option;if(!data)$this.data("tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
trigger:"hover focus",title:"",delay:0,html:false,container:false};$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(window.jQuery);
!function($){var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content")[this.options.html?"html":"text"](content);$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||
this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;content=(typeof o.content=="function"?o.content.call($e[0]):o.content)||$e.attr("data-content");return content},tip:function(){if(!this.$tip)this.$tip=$(this.options.template);return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options=typeof option==
"object"&&option;if(!data)$this.data("popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})};$.fn.popover.Constructor=Popover;$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(window.jQuery);
!function($){function ScrollSpy(element,options){var process=$.proxy(this.process,this),$element=$(element).is("body")?$(window):$(element),href;this.options=$.extend({},$.fn.scrollspy.defaults,options);this.$scrollElement=$element.on("scroll.scroll-spy.data-api",process);this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=$("body");this.refresh();this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var self=
this,$targets;this.offsets=$([]);this.targets=$([]);$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href.position().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1])})},process:function(){var scrollTop=this.$scrollElement.scrollTop()+
this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget,i;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},activate:function(target){var active,selector;this.activeTarget=
target;$(this.selector).parent(".active").removeClass("active");selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';active=$(selector).parent("li").addClass("active");if(active.parent(".dropdown-menu").length)active=active.closest("li.dropdown").addClass("active");active.trigger("activate")}};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("scrollspy"),options=typeof option=="object"&&option;
if(!data)$this.data("scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})};$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.defaults={offset:10};$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(window.jQuery);
!function($){var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target"),previous,$target,e;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;previous=$ul.find(".active:last a")[0];e=$.Event("show",{relatedTarget:previous});$this.trigger(e);if(e.isDefaultPrevented())return;
$target=$(selector);this.activate($this.parent("li"),$ul);this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})},activate:function(element,container,callback){var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");element.addClass("active");if(transition){element[0].offsetWidth;element.addClass("in")}else element.removeClass("fade");
if(element.parent(".dropdown-menu"))element.closest("li.dropdown").addClass("active");callback&&callback()}transition?$active.one($.support.transition.end,next):next();$active.removeClass("in")}};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");if(!data)$this.data("tab",data=new Tab(this));if(typeof option=="string")data[option]()})};$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};$(document).on("click.tab.data-api",
'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();$(this).tab("show")})}(window.jQuery);
!function($){var Typeahead=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.typeahead.defaults,options);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=$(this.options.menu);this.shown=false;this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=
this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(val)).change();return this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:pos.top+pos.height,left:pos.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(event){var items;this.query=this.$element.val();if(!this.query||
this.query.length<this.options.minLength)return this.shown?this.hide():this;items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source;return items?this.process(items):this},process:function(items){var that=this;items=$.grep(items,function(item){return that.matcher(item)});items=this.sorter(items);if(!items.length)return this.shown?this.hide():this;return this.render(items.slice(0,this.options.items)).show()},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},
sorter:function(items){var beginswith=[],caseSensitive=[],caseInsensitive=[],item;while(item=items.shift())if(!item.toLowerCase().indexOf(this.query.toLowerCase()))beginswith.push(item);else if(~item.indexOf(this.query))caseSensitive.push(item);else caseInsensitive.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+
match+"</strong>"})},render:function(items){var that=this;items=$(items).map(function(i,item){i=$(that.options.item).attr("data-value",item);i.find("a").html(that.highlighter(item));return i[0]});items.first().addClass("active");this.$menu.html(items);return this},next:function(event){var active=this.$menu.find(".active").removeClass("active"),next=active.next();if(!next.length)next=$(this.$menu.find("li")[0]);next.addClass("active")},prev:function(event){var active=this.$menu.find(".active").removeClass("active"),
prev=active.prev();if(!prev.length)prev=this.$menu.find("li").last();prev.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",$.proxy(this.keydown,this));this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,
this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;if(!isSupported){this.$element.setAttribute(eventName,"return;");isSupported=typeof this.$element[eventName]==="function"}return isSupported},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault();this.prev();break;case 40:e.preventDefault();this.next();break}e.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,
[40,38,9,13,27]);this.move(e)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation();e.preventDefault()},focus:function(e){this.focused=true},blur:function(e){this.focused=false;if(!this.mousedover&&this.shown)this.hide()},click:function(e){e.stopPropagation();
e.preventDefault();this.select();this.$element.focus()},mouseenter:function(e){this.mousedover=true;this.$menu.find(".active").removeClass("active");$(e.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=false;if(!this.focused&&this.shown)this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options=typeof option=="object"&&option;if(!data)$this.data("typeahead",data=new Typeahead(this,
options));if(typeof option=="string")data[option]()})};$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};$.fn.typeahead.Constructor=Typeahead;$.fn.typeahead.noConflict=function(){$.fn.typeahead=old;return this};$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);if($this.data("typeahead"))return;$this.typeahead($this.data())})}(window.jQuery);
!function($){var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options);this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this));this.$element=$(element);this.checkPosition()};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),
offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset="affix affix-top affix-bottom",affix;if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top();if(typeof offsetBottom=="function")offsetBottom=offset.bottom();affix=this.unpin!=null&&scrollTop+this.unpin<=position.top?false:offsetBottom!=null&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":offsetTop!=null&&scrollTop<=offsetTop?"top":false;
if(this.affixed===affix)return;this.affixed=affix;this.unpin=affix=="bottom"?position.top-scrollTop:null;this.$element.removeClass(reset).addClass("affix"+(affix?"-"+affix:""))};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("affix"),options=typeof option=="object"&&option;if(!data)$this.data("affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})};$.fn.affix.Constructor=Affix;$.fn.affix.defaults={offset:0};$.fn.affix.noConflict=
function(){$.fn.affix=old;return this};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{};data.offsetBottom&&(data.offset.bottom=data.offsetBottom);data.offsetTop&&(data.offset.top=data.offsetTop);$spy.affix(data)})})}(window.jQuery);
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,g=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):
n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length)for(var u=0,i=n.length;i>u;u++){if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=
arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),
!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:g&&n.every===g?n.every(t,e):(A(n,function(n,i,
a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,
function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,
t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,
index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,
t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,
t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):
n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),
r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===
b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));var r=o.call(arguments,2);return function(){return n.apply(t,r.concat(o.call(arguments)))}},w.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,
t.concat(o.call(arguments)))}},w.bindAll=function(n){var t=o.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=
function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),
n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=
[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in
n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var I=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&
(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case "[object String]":return n==t+"";case "[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case "[object Date]":case "[object Boolean]":return+n==+t;case "[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==
u){if(a=n.length,o=a==t.length)for(;a--&&(o=I(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&I(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return I(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,
t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&
!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return n===void 0},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*
(t-n+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=w.invert(M.escape);var S={escape:RegExp("["+w.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(M.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(S[n],function(t){return M[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),
function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=
RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(B,function(n){return"\\"+q[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+
a+"return __p;\n";try{e=Function(r.variable||"obj","_",a)}catch(o$58){throw o$58.source=a,o$58;}if(t)return e(t,w);var c=function(n){return e.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=
n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);